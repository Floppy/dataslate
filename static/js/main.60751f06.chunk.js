(this.webpackJsonpdataslate=this.webpackJsonpdataslate||[]).push([[0],{183:function(e,t,a){e.exports=a(325)},188:function(e,t,a){},205:function(e,t){},207:function(e,t){},217:function(e,t){},219:function(e,t){},245:function(e,t){},246:function(e,t){},251:function(e,t){},253:function(e,t){},277:function(e,t){},325:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(45),o=a.n(l),i=(a(188),a(32)),s=a(26),c=a.n(s),m=a(37),u=a(66),d=a(178),h=a(330);var p=function(){return r.a.createElement(h.a,null,r.a.createElement("h1",null,"Dataslate"),r.a.createElement("p",{className:"lead"},"Easy-to-use datasheets for Warhammer 40,000: Kill Team"),r.a.createElement("ul",null,r.a.createElement("li",null,"All the info you need, when you need it"),r.a.createElement("li",null,"Stats and abilities organised by phase"),r.a.createElement("li",null,"No wasted space for identical mdels"),r.a.createElement("li",null,"Designed for print or screen"),r.a.createElement("li",null,"Clear, uncluttered layout for easy reference")))},f=a(331),g=a(332),E=a(341),v=a(339);var b=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null),r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Header,{as:"h3"},"Step 1"),r.a.createElement(E.a.Body,{style:{minHeight:"12em"}},r.a.createElement(E.a.Text,null,"Build your force in"," ",r.a.createElement("a",{href:"https://battlescribe.net/"},"Battlescribe"),"."),r.a.createElement(E.a.Text,null,"Currently only Kill Team rosters are supported.")))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Header,{as:"h3"},"Step 2"),r.a.createElement(E.a.Body,{style:{minHeight:"12em"}},r.a.createElement(d.a,{onDrop:e.onUpload,accept:".ros,.rosz"},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement(v.a,Object.assign({variant:"primary"},t(),{style:{textAlign:"center"}}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drop your roster file here, or click to select one."),r.a.createElement("p",null,r.a.createElement("em",null,"(*.rosz and *.ros accepted)")))}))))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Header,{as:"h3"},"Step 3"),r.a.createElement(E.a.Body,{style:{minHeight:"12em"}},r.a.createElement(E.a.Text,null,"Print your datasheets out, and never forget an ability again!"),r.a.createElement(E.a.Text,null,"Prepare to dominate your foes!"))))),r.a.createElement("footer",null,"Built with ",r.a.createElement("a",{href:"https://reactjs.org/"},"React")," and ",r.a.createElement("a",{href:"https://getbootstrap.com"},"Bootstrap"),". Icons courtesy of ",r.a.createElement("a",{href:"https://killteam.app/"},"Companion for Kill Team"),". Released as ",r.a.createElement("a",{href:"https://github.com/floppy/dataslate"},"Open Source"),", report problems ",r.a.createElement("a",{href:"https://github.com/floppy/dataslate/issues/new"},"on GitHub"),"."))};var y=function(e){return r.a.createElement("div",{style:{pageBreakAfter:"always"}},r.a.createElement("h1",{style:{background:"black",color:"white",padding:"10px",width:"100%",textTransform:"capitalize",display:"flex"}},r.a.createElement(g.a,null,e.name," Phase"),r.a.createElement(g.a,{style:{flexGrow:0,textAlign:"right"}},e.note&&r.a.createElement("small",null,e.note))),e.children)},w=a(333),k=a(4),x=a.n(k);var S=function(e){var t=e.phase?e.abilities.filter((function(t){return t.phases.indexOf(e.phase)>=0})):e.abilities.filter((function(e){return 0===e.phases.length})),a=e.highlight?"primary":"";return 0===t.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm",variant:a},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ability"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,x.a.sortBy(t,["name"]).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description))}))))};var A=function(e){return r.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"M"),r.a.createElement("th",null,"WS"),r.a.createElement("th",null,"BS"),r.a.createElement("th",null,"S"),r.a.createElement("th",null,"T"),r.a.createElement("th",null,"W"),r.a.createElement("th",null,"A"),r.a.createElement("th",null,"Ld"),r.a.createElement("th",null,"Sv"),r.a.createElement("th",null,"Points"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.movement,'"'),r.a.createElement("td",null,e.weapon_skill,"+"),r.a.createElement("td",null,isNaN(e.ballistic_skill)?"-":e.ballistic_skill+"+"),r.a.createElement("td",null,e.strength),r.a.createElement("td",null,e.toughness),r.a.createElement("td",null,e.wounds),r.a.createElement("td",null,e.attacks,e.additional_attacks?r.a.createElement("strong",null," +",e.additional_attacks):null),r.a.createElement("td",null,e.leadership),r.a.createElement("td",null,e.save,"+",e.invulnerable_save?r.a.createElement(r.a.Fragment,null," / ",r.a.createElement("strong",null,e.invulnerable_save,"++")):null),r.a.createElement("td",null,e.points))))},N=a(334);function O(e){return e.specialism?r.a.createElement("img",{className:"specialism",style:{height:"1em",marginRight:"10px"},alt:e.specialism,src:"/icons/".concat(e.specialism.toLowerCase(),".svg")}):r.a.createElement(r.a.Fragment,null)}function j(e){return e.category&&"specialist"!==e.category.toLowerCase()&&"specialist retainer"!==e.category.toLowerCase()?r.a.createElement("img",{className:"category",style:{height:"1em",marginRight:"10px"},alt:e.category,src:"/icons/".concat(e.category.toLowerCase(),".svg")}):r.a.createElement(r.a.Fragment,null)}var C=a(172),R=a.n(C);function P(e){var t=x.a.without([e.model.name,e.model.type,"Specialist"===e.model.category||"Specialist Retainer"===e.model.category?e.model.specialism:e.model.category],null,"");return r.a.createElement("h2",{style:{background:"lightgrey",color:"black",padding:"5px",display:"flex",width:"100%",justifyContent:"space-between"}},r.a.createElement(g.a,null,("Specialist"===e.model.category||"Specialist Retainer"===e.model.category)&&r.a.createElement(O,{specialism:e.model.specialism}),e.model.category&&r.a.createElement(j,{category:e.model.category}),e.model.selected>1&&r.a.createElement("small",null,e.model.selected," x "),r.a.createElement("strong",null,t[0]," "),r.a.createElement("small",null,x.a.join(x.a.slice(t,1),", "))),e.showSelector&&r.a.createElement(g.a,{style:{flexGrow:0}},r.a.createElement(R.a,{value:e.model.selected,slideStop:function(t){return e.onSelectionChanged&&e.onSelectionChanged(e.model.uuid,t.target.value)},step:1,max:e.model.count,min:0})))}function F(e){return r.a.createElement(f.a,{style:{opacity:e.model.selected>0?"1":"0.25"}},r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model,showSelector:!0,onSelectionChanged:e.onSelectionChanged}),"Commander"===e.model.category&&r.a.createElement("div",null,"Commander specialism: ",r.a.createElement("strong",null,e.model.specialism)),r.a.createElement("p",null,e.model.weapons.map((function(e){return e.name})).concat(e.model.wargear.map((function(e){return e.name}))).join(", ")),r.a.createElement(A,Object.assign({},e.model.stats,{points:e.model.points})),r.a.createElement(S,{abilities:e.model.abilities,phase:""})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement("div",null,r.a.createElement(N.a,{pill:!0,variant:"primary",className:"mb-2",style:{textTransform:"uppercase",marginRight:"10px",display:"block"}},e.model.faction),e.model.keywords.map((function(e){return r.a.createElement(N.a,{pill:!0,variant:"secondary",className:"mb-2",style:{textTransform:"uppercase",marginRight:"10px",display:"block"}},e)})))))}var B=function(e){return r.a.createElement("div",{className:"statbadge mb-4",style:{paddingTop:".2vw",border:"1px solid black",width:"5vw",height:"5vw",background:"black",color:"white",display:"flex",flexDirection:"column",textAlign:"center",borderRadius:"50%"}},r.a.createElement("div",{className:"name",style:{fontSize:"1vw",lineHeight:"1vw"}},e.name),r.a.createElement("div",{className:"value",style:{fontSize:"3vw",lineHeight:"3vw",fontWeight:"bold"}},e.value,e.secondaryValue?r.a.createElement("small",null,e.secondaryValue):r.a.createElement(r.a.Fragment,null)))};function T(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(S,{abilities:e.model.abilities,phase:"movement"})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement(B,{name:"M",value:"".concat(e.model.stats.movement)})))}function _(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(S,{abilities:e.model.abilities,phase:"scouting"})))}function W(e){return e.abilities.filter((function(e){return e.phases.indexOf("scouting")>=0})).length>0}function I(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(S,{abilities:e.model.abilities,phase:"deployment"})))}function V(e){return e.abilities.filter((function(e){return e.phases.indexOf("deployment")>=0})).length>0}function D(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(S,{abilities:e.model.abilities,phase:"initiative"})))}function M(e){return e.abilities.filter((function(e){return e.phases.indexOf("initiative")>=0})).length>0}var z=function(e){return 0===e.powers.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Power"),r.a.createElement("th",null,"Warp Charge"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,x.a.sortBy(e.powers,["name"]).map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.charge),r.a.createElement("td",null,e.description))}))))};function L(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(z,{powers:e.model.psychicPowers}),r.a.createElement(S,{abilities:e.model.abilities,phase:"psychic"})))}function H(e){return e.psychicPowers.length>0||e.abilities.filter((function(e){return e.phases.indexOf("psychic")>=0})).length>0}var U=function(e){var t="shooting"===e.phase?e.weapons.filter((function(e){return"Melee"!==e.type})):e.weapons.filter((function(e){return"Melee"===e.type}));return 0===t.length?r.a.createElement(r.a.Fragment,null):r.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Weapon"),"shooting"===e.phase&&r.a.createElement("th",null,"Range"),"shooting"===e.phase&&r.a.createElement("th",null,"Type"),"shooting"===e.phase&&r.a.createElement("th",null,"Shots"),r.a.createElement("th",null,"S"),r.a.createElement("th",null,"AP"),r.a.createElement("th",null,"D"),r.a.createElement("th",null,"Abilities"))),r.a.createElement("tbody",null,x.a.sortBy(t,["name"]).map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.name),"shooting"===e.phase&&r.a.createElement("td",null,t.range,'"'),"shooting"===e.phase&&r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.type),"shooting"===e.phase&&r.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.shots),r.a.createElement("td",null,t.strength),r.a.createElement("td",null,t.armourPiercing),r.a.createElement("td",null,t.damage),r.a.createElement("td",null,t.abilities))}))))};function G(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),K(e.model)&&r.a.createElement(U,{weapons:e.model.weapons,phase:"shooting",userStrength:e.model.stats.strength}),r.a.createElement(S,{abilities:e.model.abilities,phase:"shooting"})),r.a.createElement(g.a,{sm:"auto"},K(e.model)&&r.a.createElement(B,{name:"BS",value:"".concat(e.model.stats.ballistic_skill),secondaryValue:"+"}),r.a.createElement(B,{name:"T",value:"".concat(e.model.stats.toughness)})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement(B,{name:"Sv",value:"".concat(e.model.stats.save),secondaryValue:"+"}),e.model.stats.invulnerable_save?r.a.createElement(B,{name:"Inv",value:"".concat(e.model.stats.invulnerable_save),secondaryValue:"+"}):r.a.createElement(r.a.Fragment,null)))}function K(e){return!isNaN(e.stats.ballistic_skill)&&e.weapons.filter((function(e){return"Melee"!==e.type})).length>0}function J(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(U,{weapons:e.model.weapons,phase:"fight",userStrength:e.model.stats.strength}),r.a.createElement(S,{abilities:e.model.abilities,phase:"fight"})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement(B,{name:"A",value:"".concat(e.model.stats.attacks),secondaryValue:e.model.stats.additional_attacks?"+".concat(e.model.stats.additional_attacks):null}),r.a.createElement(B,{name:"T",value:"".concat(e.model.stats.toughness)})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement(B,{name:"WS",value:"".concat(e.model.stats.weapon_skill),secondaryValue:"+"}),r.a.createElement(B,{name:"Sv",value:"".concat(e.model.stats.save),secondaryValue:"+"}),e.model.stats.invulnerable_save?r.a.createElement(B,{name:"Inv",value:"".concat(e.model.stats.invulnerable_save),secondaryValue:"+"}):r.a.createElement(r.a.Fragment,null)))}function $(e){return r.a.createElement(f.a,null,r.a.createElement(g.a,null,r.a.createElement(P,{model:e.model}),r.a.createElement(S,{abilities:e.model.abilities,phase:"morale"})),r.a.createElement(g.a,{sm:"auto"},r.a.createElement(B,{name:"Ld",value:"".concat(e.model.stats.leadership)})))}var q=a(335);function Q(e){return r.a.createElement(q.a,{variant:"primary",className:"d-print-none",onClick:e.onClose},"Close")}function X(e){var t=x.a.sortBy(e.models,(function(e){return[null==e.category,e.category,e.type]})),a=x.a.filter(t,(function(e){return e.selected>0}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{background:"black",color:"white",padding:"10px",width:"100%",textTransform:"capitalize",display:"flex"}},r.a.createElement(g.a,null,e.name),r.a.createElement(g.a,{style:{flexGrow:0,textAlign:"right"}},r.a.createElement("small",null,x.a.sumBy(e.models,(function(e){return e.selected*e.points})),"pts")),r.a.createElement(g.a,{style:{flexGrow:0,textAlign:"right"}},r.a.createElement(Q,{onClose:e.onClose}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"",highlight:!0}),t.map((function(t){return r.a.createElement(F,{model:t,onSelectionChanged:e.onSelectionChanged})}))),x.a.some(a,W)&&r.a.createElement(y,{name:"scouting"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"scouting",highlight:!0}),a.map((function(e){return W(e)&&r.a.createElement(_,{model:e})})))),x.a.some(a,V)&&r.a.createElement(y,{name:"deployment"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"deployment",highlight:!0}),a.map((function(e){return V(e)&&r.a.createElement(I,{model:e})})))),x.a.some(a,M)&&r.a.createElement(y,{name:"initiative"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"initiative",highlight:!0}),a.map((function(e){return M(e)&&r.a.createElement(D,{model:e})})))),r.a.createElement(y,{name:"movement"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"movement",highlight:!0}),a.map((function(e){return r.a.createElement(T,{model:e})})))),x.a.some(a,H)&&r.a.createElement(y,{name:"psychic"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"psychic",highlight:!0}),a.map((function(e){return H(e)&&r.a.createElement(L,{model:e})})))),r.a.createElement(y,{name:"shooting"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"shooting",highlight:!0}),a.map((function(e){return r.a.createElement(G,{model:e})})))),r.a.createElement(y,{name:"fight"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"fight",highlight:!0}),a.map((function(e){return r.a.createElement(J,{model:e})})))),r.a.createElement(y,{name:"morale"},r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{abilities:e.forceRules,phase:"morale",highlight:!0}),a.map((function(e){return r.a.createElement($,{model:e})})))))}var Y=a(336),Z=a(98),ee=a(340),te=a(173),ae=a(174),ne=a.n(ae),re=a(175),le={scouting:[/ scouting /],deployment:[/ before the first battle round /,/ set up /,/ cult ambush /],initiative:[/ start of each battle round /,/ beginning of each battle round /,/ at the beginning of the battle round /],movement:[/ movement phase /,/ climbs? /,/ normal move /,/ advances? /,/ charges? /,/ falls? back /,/ reacts? /,/ overwatch /,/ retreats? /,/ fly /,/ after this model has charged /,/ from reserves? /,/ can move across /,/ setup within /],psychic:[/ psychic /,/ deny the witch /,/ perils of the warp /,/ psychich /],shooting:[/ shooting phase /,/ shots? /,/ ballistic skill /,/ ranged /,/ range characteristic /,/ half range /,/ long range /,/ short range /,/ grenades? /,/ shoots? /,/ shooting /,/ fire[sd]+ /,/ firing /,/ obscured /,/ obcured /,/ order(ed)? /,/ voice of command /,/ invulnerable save /,/ demolition charges? /,/ liberator autostubs /,/ obscurred /,/ look out sir! /,/ pistol /,/ heavy weapons?/,/ add [0-9] to saving throws /],fight:[/ fight phase /,/ fights? /,/ weapon skill /,/ attacks characteristics? /,/ strength characteristics? /,/ piles? in /,/ consolidates? /,/ melee /,/ close combat /,/ death to the false emperor /,/ additional attacks? /,/ invulnerable save /,/ look out sir! /,/ intervening terrain /,/ terrain that is between the two models /,/ damage characteristic is [0-9] in a battle round in which this model charged /,/ add [0-9] to saving throws /],morale:[/ nerve /,/ leadership /]},oe=[/ weapon /,/ hit rolls? /,/ attack(s|ing)? /,/ saves? /,/ saving throws? /,/ injury rolls? /,/ wound rolls? /,/ loses? a wound /,/ fall(ing)? damage /,/ the bearer is taken out of action /,/ toughness characteristic /,/ suffers? a mortal wound /,/ taken out of action /,/ this weapon/,/ reduced to 0 wounds /],ie={deployment:[/ from reserve /],movement:[/ previous movement phase /,/ preceding movement phase /,/ if the firing model moved /,/ moved during the movement phase /,/ round in which it charges or is charged /,/ in which it made a successful charge /,/ even if it fell back in the movement phase /,/ model that can fly /,/ as if it were the movement phase /,/ stunned /,/ penalty for moving /,/ as if the model had remained stationary /,/ demolition charge /],psychic:[/ after all of this weapon's attacks have been resolved /],shooting:[/ when (it|this model) fires overwatch /,/ invulnerable save (against attacks made )?in the fight phase /,/ as if it were your shooting phase /,/ tactical support turret /,/ out of action in the shooting phase /,/ mordian /],fight:[/ the ordered model immediately fights /,/ shots equal to its attacks characteristic /,/ stunned /,/ target enemies at [0-9]{1,2}" or less /,/ within half range /,/ tactical support turret /],morale:[/ target model's leadership /,/ weapon against a model which has a leadership /,/ subtract 1 from its leadership /]},se=function(e){var t=" "+e.toLowerCase().replace(/[.,)(]/g,"")+" ",a=[];return x.a.forIn(le,(function(e,n){x.a.some(e,(function(e){return e.test(t)}))&&a.push(n)})),a.includes("fight")||a.includes("shooting")||x.a.some(oe,(function(e){return e.test(t)}))&&a.push("fight","shooting"),x.a.forIn(ie,(function(e,n){x.a.some(e,(function(e){return e.test(t)}))&&x.a.remove(a,(function(e){return e===n}))})),a},ce=function(e){var t=[/models with this ability have a ([1-6]{1})\+ invulnerable save/,/has a ([1-6]{1})\+ invulnerable save($|\.|,| and| instead of)/,/has an invulnerable save of ([1-6]{1})\+/],a=x.a.map(e,(function(e){return x.a.min(x.a.map(t,(function(t){var a=e.description.match(t);return a?parseInt(a[1]):null})))}));return x.a.min(a)},me=re.useNamespaces({roster:"http://www.battlescribe.net/schema/rosterSchema"}),ue=function(e,t){var a=me("roster:profiles/roster:profile[@typeName='Model']//roster:characteristic[@name='".concat(e,"']"),t);return a.length>0?parseInt(a[0].childNodes[0].nodeValue):""},de=function(e,t,a){var n=me("roster:characteristics/roster:characteristic[@name='".concat(e,"']"),t);return n.length>0?a?parseInt(n[0].childNodes[0].nodeValue):n[0].childNodes[0].nodeValue:""},he=function(e){var t=me(".//roster:costs/roster:cost[@name='pts']",e);return x.a.sumBy(t,(function(e){return parseInt(e.getAttribute("value"))}))},pe=function(e){var t=me("roster:description",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:se(t)}},fe=function(e){var t=me(".//roster:characteristic[@name='Description']",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:se(t)}},ge=function(e){var t=me(".//roster:characteristic[@name='Ability']",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:se(t)}},Ee=function(e){var t=me(".//roster:characteristic[@name='Psychic Power']",e)[0].childNodes[0].nodeValue,a=t.match(/warp charge value of ([0-9]+)\.(.*)/),n=null;return a.length>2&&(n=parseInt(a[1]),t=a[2]),{name:e.getAttribute("name"),charge:n,description:t}},ve=function(e,t){var a=x.a.map(e,(function(e){return e.abilities})).concat(x.a.map(t,(function(e){return e.description}))),n=x.a.map(a,(function(e){return function(e){var t=[/if a model/,/if the bearer/,/unless/];return x.a.sum(x.a.map([/Add ([1-9]{1}) to this model's Attacks characteristic/,/ ([1-9]|an|one|two) additional attack/,/(one) \(and only one\) attack with this weapon./],(function(a){var n=e.match(a);return n?x.a.some(t,(function(t){return t.test(e)}))?0:"an"===n[1]||"one"===n[1]?1:"two"===n[1]?2:parseInt(n[1]||n[2]):0})))}(e)}));return x.a.sum(n)},be=function(e){var t=me(".//roster:profile[@typeName='Wargear']",e).map(ge),a=me("roster:selections/roster:selection[roster:selections/roster:selection/roster:profiles/roster:profile/@typeName='Ability']",e),n=me(".//roster:profile[@typeName='Ability']",e).map(fe).concat(t),r={movement:ue("M",e),weapon_skill:ue("WS",e),ballistic_skill:ue("BS",e),strength:ue("S",e),toughness:ue("T",e),wounds:ue("W",e),attacks:ue("A",e),leadership:ue("Ld",e),save:ue("Sv",e),invulnerable_save:ce(n)},l={name:"Bare fists",range:"-",type:"Melee",strength:r.strength,armourPiercing:0,damage:1,abilities:"Default close combat weapon available to all models"},o=me(".//roster:profile[@typeName='Weapon']",e).map((function(e){return function(e,t){var a=de("S",e,!1);"User"===a&&(a=t);var n=/x([0-9]+)/i.exec(a);n&&(a=t*parseInt(n[1])),(n=/\+([0-9]+)/i.exec(a))&&(a=t+parseInt(n[1]));var r=de("Type",e,!1);return"Melee"!==r&&(r=r.split(" ").slice(0,-1).join(" ")),{name:e.getAttribute("name"),range:de("Range",e,!0),type:r,shots:de("Type",e,!1).split(" ").slice(-1)[0],strength:a,armourPiercing:de("AP",e,!0),damage:de("D",e,!1),abilities:de("Abilities",e,!1)}}(e,r.strength)})).concat([l]);r.additional_attacks=ve(o,n);var s=me("roster:selections/roster:selection/roster:profiles/roster:profile[@typeName='Psychic Power']",e).map(Ee),c=me("roster:categories/roster:category[@primary='true']",e)[0].getAttribute("name"),m=me("roster:categories/roster:category[@primary='false' and starts-with(@name,'Faction: ')]",e),u=me("roster:categories/roster:category[@primary='false' and not(starts-with(@name,'Faction: '))]",e).map((function(e){return e.getAttribute("name")}));x.a.remove(u,(function(e){return"Model"===e}));var d={name:e.getAttribute("customName"),type:e.getAttribute("name"),category:"Non-specialist"===c?null:c,stats:r,abilities:n,weapons:o,wargear:t,psychicPowers:s,specialism:a.length>0?a[0].getAttribute("name"):null,faction:m.length>0?m[0].getAttribute("name").split(": ",2)[1]:null,keywords:u,points:he(e)};return Object(i.a)(Object(i.a)({},d),{},{hash:ne()([]).hash(d)})},ye=function(e){var t,a=[],n=(new te.DOMParser).parseFromString(e),r=me("/roster:roster",n)[0].getAttribute("name"),l=me("//roster:force/roster:rules/roster:rule",n).map(pe),o=Object(Z.a)(me("//roster:force/roster:categories/roster:category",n));try{for(o.s();!(t=o.n()).done;){var s,c=t.value.getAttribute("entryId"),m=Object(Z.a)(me("//roster:selection[@type='model' and roster:categories/roster:category/@entryId='".concat(c,"']"),n));try{for(m.s();!(s=m.n()).done;){var u=s.value;a.push(be(u))}}catch(h){m.e(h)}finally{m.f()}}}catch(h){o.e(h)}finally{o.f()}var d=x.a.groupBy(a,(function(e){return e.hash}));return{name:r,forceRules:l,models:x.a.map(d,(function(e){return Object(i.a)(Object(i.a)({},e[0]),{},{uuid:Object(ee.a)(),count:e.length,selected:e.length})}))}},we=a(176),ke=a.n(we),xe=function(){var e=Object(m.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("P"===t[0]){e.next=4;break}return e.abrupt("return",t);case 4:return a=new ke.a,e.next=7,a.loadAsync(t);case 7:return n=e.sent,e.abrupt("return",n.file(/[^/]+\.ros/)[0].async("string"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(m.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t);case 2:return a=e.sent,e.abrupt("return",ye(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(m.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FileReader,e.abrupt("return",new Promise((function(e,n){a.onerror=function(){a.abort(),n(new DOMException("Problem parsing input file."))},a.onloadend=Object(m.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Se(a.result));case 1:case"end":return t.stop()}}),t)}))),a.readAsBinaryString(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ne(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),d=s[0],h=s[1],p=Object(n.useState)([]),f=Object(u.a)(p,2),g=f[0],E=f[1],v=function(){var e=Object(m.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t[0]);case 2:a=e.sent,l(a.name),E(a.forceRules),h(a.models);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Y.a,{fluid:"lg"},0===d.length?r.a.createElement(b,{onUpload:v}):r.a.createElement(X,{name:a,models:d,onClose:function(){E([]),h([]),l("")},forceRules:g,onSelectionChanged:function(e,t){return h(d.map((function(a){return a.uuid!==e?a:Object(i.a)(Object(i.a)({},a),{},{selected:t})})))}}))}var Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(338).a({dsn:"https://6fe3e632b45a44c086068e13f3b1a783@o464596.ingest.sentry.io/5473956"}),o.a.render(r.a.createElement(Ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Oe?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):je(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):je(t,e)}))}}()}},[[183,1,2]]]);
//# sourceMappingURL=main.60751f06.chunk.js.map