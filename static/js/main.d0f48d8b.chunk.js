(this.webpackJsonpdataslate=this.webpackJsonpdataslate||[]).push([[0],{181:function(e,t,a){e.exports=a(327)},186:function(e,t,a){},238:function(e,t){},240:function(e,t){},250:function(e,t){},252:function(e,t){},278:function(e,t){},279:function(e,t){},284:function(e,t){},286:function(e,t){},310:function(e,t){},327:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(42),o=a.n(r),i=(a(186),a(28)),s=a(167),c=a(168),m=a(178),u=a(174),d=a(175),h=a(332);var p=function(){return l.a.createElement(h.a,null,l.a.createElement("h1",null,"Dataslate"),l.a.createElement("p",{className:"lead"},"Easy-to-use datasheets for Warhammer 40,000: Kill Team"),l.a.createElement("ul",null,l.a.createElement("li",null,"All the info you need, when you need it"),l.a.createElement("li",null,"Stats and abilities organised by phase"),l.a.createElement("li",null,"No wasted space for identical mdels"),l.a.createElement("li",null,"Designed for print or screen"),l.a.createElement("li",null,"Clear, uncluttered layout for easy reference")))},g=a(333),f=a(334),E=a(343),v=a(341);var b=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p,null),l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(E.a.Header,{as:"h3"},"Step 1"),l.a.createElement(E.a.Body,{style:{minHeight:"12em"}},l.a.createElement(E.a.Text,null,"Build your force in"," ",l.a.createElement("a",{href:"https://battlescribe.net/"},"Battlescribe"),"."),l.a.createElement(E.a.Text,null,"Currently only Kill Team rosters are supported.")))),l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(E.a.Header,{as:"h3"},"Step 2"),l.a.createElement(E.a.Body,{style:{minHeight:"12em"}},l.a.createElement(d.a,{onDrop:e.onUpload,accept:".ros,.rosz"},(function(e){var t=e.getRootProps,a=e.getInputProps;return l.a.createElement(v.a,Object.assign({variant:"primary"},t(),{style:{textAlign:"center"}}),l.a.createElement("input",a()),l.a.createElement("p",null,"Drop your roster file here, or click to select one."),l.a.createElement("p",null,l.a.createElement("em",null,"(*.rosz and *.ros accepted)")))}))))),l.a.createElement(f.a,null,l.a.createElement(E.a,null,l.a.createElement(E.a.Header,{as:"h3"},"Step 3"),l.a.createElement(E.a.Body,{style:{minHeight:"12em"}},l.a.createElement(E.a.Text,null,"Print your datasheets out, and never forget an ability again!"),l.a.createElement(E.a.Text,null,"Prepare to dominate your foes!"))))),l.a.createElement("footer",null,"Built with ",l.a.createElement("a",{href:"https://reactjs.org/"},"React")," and ",l.a.createElement("a",{href:"https://getbootstrap.com"},"Bootstrap"),". Icons courtesy of ",l.a.createElement("a",{href:"https://killteam.app/"},"Companion for Kill Team"),". Released as ",l.a.createElement("a",{href:"https://github.com/floppy/dataslate"},"Open Source"),", report problems ",l.a.createElement("a",{href:"https://github.com/floppy/dataslate/issues/new"},"on GitHub"),"."))};var y=function(e){return l.a.createElement("div",{style:{pageBreakAfter:"always"}},l.a.createElement("h1",{style:{background:"black",color:"white",padding:"10px",width:"100%",textTransform:"capitalize",display:"flex"}},l.a.createElement(f.a,null,e.name," Phase"),l.a.createElement(f.a,{style:{flexGrow:0,textAlign:"right"}},e.note&&l.a.createElement("small",null,e.note))),e.children)},w=a(335),k=a(35);var S=function(e){var t=e.phase?e.abilities.filter((function(t){return t.phases.indexOf(e.phase)>=0})):e.abilities.filter((function(e){return 0===e.phases.length})),a=e.highlight?"primary":"";return 0===t.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm",variant:a},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ability"),l.a.createElement("th",null,"Description"))),l.a.createElement("tbody",null,k.sortBy(t,["name"]).map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.description))}))))};var x=function(e){return l.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"M"),l.a.createElement("th",null,"WS"),l.a.createElement("th",null,"BS"),l.a.createElement("th",null,"S"),l.a.createElement("th",null,"T"),l.a.createElement("th",null,"W"),l.a.createElement("th",null,"A"),l.a.createElement("th",null,"Ld"),l.a.createElement("th",null,"Sv"),l.a.createElement("th",null,"Points"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,e.movement,'"'),l.a.createElement("td",null,e.weapon_skill,"+"),l.a.createElement("td",null,isNaN(e.ballistic_skill)?"-":e.ballistic_skill+"+"),l.a.createElement("td",null,e.strength),l.a.createElement("td",null,e.toughness),l.a.createElement("td",null,e.wounds),l.a.createElement("td",null,e.attacks,e.additional_attacks?l.a.createElement("strong",null," +",e.additional_attacks):null),l.a.createElement("td",null,e.leadership),l.a.createElement("td",null,e.save,"+",e.invulnerable_save?l.a.createElement(l.a.Fragment,null," / ",l.a.createElement("strong",null,e.invulnerable_save,"++")):null),l.a.createElement("td",null,e.points))))},A=a(336);function C(e){return e.specialism?l.a.createElement("img",{className:"specialism",style:{height:"1em",marginRight:"10px"},alt:e.specialism,src:"/dataslate/icons/".concat(e.specialism.toLowerCase(),".svg")}):l.a.createElement(l.a.Fragment,null)}function N(e){return e.category&&"specialist"!==e.category.toLowerCase()&&"specialist retainer"!==e.category.toLowerCase()?l.a.createElement("img",{className:"category",style:{height:"1em",marginRight:"10px"},alt:e.category,src:"/dataslate/icons/".concat(e.category.toLowerCase(),".svg")}):l.a.createElement(l.a.Fragment,null)}var R=a(172),O=a.n(R),j=a(35);function P(e){var t=j.without([e.model.name,e.model.type,"Specialist"===e.model.category||"Specialist Retainer"===e.model.category?e.model.specialism:e.model.category],null,"");return l.a.createElement("h2",{style:{background:"lightgrey",color:"black",padding:"5px",display:"flex",width:"100%",justifyContent:"space-between"}},l.a.createElement(f.a,null,("Specialist"===e.model.category||"Specialist Retainer"===e.model.category)&&l.a.createElement(C,{specialism:e.model.specialism}),e.model.category&&l.a.createElement(N,{category:e.model.category}),e.model.selected>1&&l.a.createElement("small",null,e.model.selected," x "),l.a.createElement("strong",null,t[0]," "),l.a.createElement("small",null,j.join(j.slice(t,1),", "))),e.showSelector&&l.a.createElement(f.a,{style:{flexGrow:0}},l.a.createElement(O.a,{value:e.model.selected,slideStop:function(t){return e.onSelectionChanged(e.model.uuid,t.target.value)},step:1,max:e.model.count,min:0})))}function F(e){return l.a.createElement(g.a,{style:{opacity:e.model.selected>0?"1":"0.25"}},l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model,showSelector:!0,onSelectionChanged:e.onSelectionChanged}),"Commander"===e.model.category&&l.a.createElement("div",null,"Commander specialism: ",l.a.createElement("strong",null,e.model.specialism)),l.a.createElement("p",null,e.model.weapons.map((function(e){return e.name})).concat(e.model.wargear.map((function(e){return e.name}))).join(", ")),l.a.createElement(x,Object.assign({},e.model.stats,{points:e.model.points})),l.a.createElement(S,{abilities:e.model.abilities,phase:""})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement("div",null,l.a.createElement(A.a,{pill:!0,variant:"primary",className:"mb-2",style:{textTransform:"uppercase",marginRight:"10px",display:"block"}},e.model.faction),e.model.keywords.map((function(e){return l.a.createElement(A.a,{pill:!0,variant:"secondary",className:"mb-2",style:{textTransform:"uppercase",marginRight:"10px",display:"block"}},e)})))))}var B=function(e){return l.a.createElement("div",{className:"statbadge mb-4",style:{paddingTop:".2vw",border:"1px solid black",width:"5vw",height:"5vw",background:"black",color:"white",display:"flex",flexDirection:"column",textAlign:"center",borderRadius:"50%"}},l.a.createElement("div",{className:"name",style:{fontSize:"1vw",lineHeight:"1vw"}},e.name),l.a.createElement("div",{className:"value",style:{fontSize:"3vw",lineHeight:"3vw",fontWeight:"bold"}},e.value,e.secondaryValue?l.a.createElement("small",null,e.secondaryValue):l.a.createElement(l.a.Fragment,null)))};function T(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(S,{abilities:e.model.abilities,phase:"movement"})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement(B,{name:"M",value:"".concat(e.model.stats.movement)})))}function _(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(S,{abilities:e.model.abilities,phase:"scouting"})))}function W(e){return e.abilities.filter((function(e){return e.phases.indexOf("scouting")>=0})).length>0}function I(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(S,{abilities:e.model.abilities,phase:"deployment"})))}function V(e){return e.abilities.filter((function(e){return e.phases.indexOf("deployment")>=0})).length>0}function D(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(S,{abilities:e.model.abilities,phase:"initiative"})))}function M(e){return e.abilities.filter((function(e){return e.phases.indexOf("initiative")>=0})).length>0}var z=a(35);var L=function(e){return 0===e.powers.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Power"),l.a.createElement("th",null,"Warp Charge"),l.a.createElement("th",null,"Description"))),l.a.createElement("tbody",null,z.sortBy(e.powers,["name"]).map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.charge),l.a.createElement("td",null,e.description))}))))};function H(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(L,{powers:e.model.psychicPowers}),l.a.createElement(S,{abilities:e.model.abilities,phase:"psychic"})))}function U(e){return e.psychicPowers.length>0||e.abilities.filter((function(e){return e.phases.indexOf("psychic")>=0})).length>0}var G=a(35);var K=function(e){var t="shooting"===e.phase?e.weapons.filter((function(e){return"Melee"!==e.type})):e.weapons.filter((function(e){return"Melee"===e.type}));return 0===t.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(w.a,{striped:!0,bordered:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Weapon"),"shooting"===e.phase&&l.a.createElement("th",null,"Range"),"shooting"===e.phase&&l.a.createElement("th",null,"Type"),"shooting"===e.phase&&l.a.createElement("th",null,"Shots"),l.a.createElement("th",null,"S"),l.a.createElement("th",null,"AP"),l.a.createElement("th",null,"D"),l.a.createElement("th",null,"Abilities"))),l.a.createElement("tbody",null,G.sortBy(t,["name"]).map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.name),"shooting"===e.phase&&l.a.createElement("td",null,t.range,'"'),"shooting"===e.phase&&l.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.type),"shooting"===e.phase&&l.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.shots),l.a.createElement("td",null,t.strength),l.a.createElement("td",null,t.armourPiercing),l.a.createElement("td",null,t.damage),l.a.createElement("td",null,t.abilities))}))))};function J(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),$(e.model)&&l.a.createElement(K,{weapons:e.model.weapons,phase:"shooting",userStrength:e.model.stats.strength}),l.a.createElement(S,{abilities:e.model.abilities,phase:"shooting"})),l.a.createElement(f.a,{sm:"auto"},$(e.model)&&l.a.createElement(B,{name:"BS",value:"".concat(e.model.stats.ballistic_skill),secondaryValue:"+"}),l.a.createElement(B,{name:"T",value:"".concat(e.model.stats.toughness)})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement(B,{name:"Sv",value:"".concat(e.model.stats.save),secondaryValue:"+"}),e.model.stats.invulnerable_save?l.a.createElement(B,{name:"Inv",value:"".concat(e.model.stats.invulnerable_save),secondaryValue:"+"}):l.a.createElement(l.a.Fragment,null)))}function $(e){return!isNaN(e.stats.ballistic_skill)&&e.weapons.filter((function(e){return"Melee"!==e.type})).length>0}function q(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(K,{weapons:e.model.weapons,phase:"fight",userStrength:e.model.stats.strength}),l.a.createElement(S,{abilities:e.model.abilities,phase:"fight"})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement(B,{name:"A",value:"".concat(e.model.stats.attacks),secondaryValue:e.model.stats.additional_attacks?"+".concat(e.model.stats.additional_attacks):null}),l.a.createElement(B,{name:"T",value:"".concat(e.model.stats.toughness)})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement(B,{name:"WS",value:"".concat(e.model.stats.weapon_skill),secondaryValue:"+"}),l.a.createElement(B,{name:"Sv",value:"".concat(e.model.stats.save),secondaryValue:"+"}),e.model.stats.invulnerable_save?l.a.createElement(B,{name:"Inv",value:"".concat(e.model.stats.invulnerable_save),secondaryValue:"+"}):l.a.createElement(l.a.Fragment,null)))}function Q(e){return l.a.createElement(g.a,null,l.a.createElement(f.a,null,l.a.createElement(P,{model:e.model}),l.a.createElement(S,{abilities:e.model.abilities,phase:"morale"})),l.a.createElement(f.a,{sm:"auto"},l.a.createElement(B,{name:"Ld",value:"".concat(e.model.stats.leadership)})))}var X=a(337);function Y(e){return l.a.createElement(X.a,{variant:"primary",className:"d-print-none",onClick:e.onClose},"Close")}var Z=a(35);var ee=function(e){var t=Z.sortBy(e.models,(function(e){return[null==e.category,e.category,e.type]})),a=Z.filter(t,(function(e){return e.selected>0}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{style:{background:"black",color:"white",padding:"10px",width:"100%",textTransform:"capitalize",display:"flex"}},l.a.createElement(f.a,null,e.name),l.a.createElement(f.a,{style:{flexGrow:0,textAlign:"right"}},l.a.createElement("small",null,Z.sumBy(e.models,(function(e){return e.selected*e.points})),"pts")),l.a.createElement(f.a,{style:{flexGrow:0,textAlign:"right"}},l.a.createElement(Y,{onClose:e.onClose}))),l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"",highlight:!0}),t.map((function(t){return l.a.createElement(F,{model:t,onSelectionChanged:e.onSelectionChanged})}))),Z.some(a,W)&&l.a.createElement(y,{name:"scouting"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"scouting",highlight:!0}),a.map((function(e){return W(e)&&l.a.createElement(_,{model:e})})))),Z.some(a,V)&&l.a.createElement(y,{name:"deployment"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"deployment",highlight:!0}),a.map((function(e){return V(e)&&l.a.createElement(I,{model:e})})))),Z.some(a,M)&&l.a.createElement(y,{name:"initiative"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"initiative",highlight:!0}),a.map((function(e){return M(e)&&l.a.createElement(D,{model:e})})))),l.a.createElement(y,{name:"movement"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"movement",highlight:!0}),a.map((function(e){return l.a.createElement(T,{model:e})})))),Z.some(a,U)&&l.a.createElement(y,{name:"psychic"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"psychic",highlight:!0}),a.map((function(e){return U(e)&&l.a.createElement(H,{model:e})})))),l.a.createElement(y,{name:"shooting"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"shooting",highlight:!0}),a.map((function(e){return l.a.createElement(J,{model:e})})))),l.a.createElement(y,{name:"fight"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"fight",highlight:!0}),a.map((function(e){return l.a.createElement(q,{model:e})})))),l.a.createElement(y,{name:"morale"},l.a.createElement(l.a.Fragment,null,l.a.createElement(S,{abilities:e.forceRules,phase:"morale",highlight:!0}),a.map((function(e){return l.a.createElement(Q,{model:e})})))))},te=a(338),ae=a(52),ne=a.n(ae),le=a(95),re=a(97),oe=a(342),ie=a(194).DOMParser,se=a(198).useNamespaces({roster:"http://www.battlescribe.net/schema/rosterSchema"}),ce=a(35),me=a(231)([]),ue=function(e,t){var a=se("roster:profiles/roster:profile[@typeName='Model']//roster:characteristic[@name='".concat(e,"']"),t);return a.length>0?parseInt(a[0].childNodes[0].nodeValue):""},de=function(e,t,a){var n=se("roster:characteristics/roster:characteristic[@name='".concat(e,"']"),t);return n.length>0?a?parseInt(n[0].childNodes[0].nodeValue):n[0].childNodes[0].nodeValue:""},he=function(e){var t=se(".//roster:costs/roster:cost[@name='pts']",e);return ce.sumBy(t,(function(e){return parseInt(e.getAttribute("value"))}))},pe=function(e){var t=" "+e.toLowerCase().replace(/[.,)(]/g,"")+" ",a=[];if(ce.forIn({scouting:[/ scouting /],deployment:[/ before the first battle round /,/ set up /,/ cult ambush /],initiative:[/ start of each battle round /,/ beginning of each battle round /,/ at the beginning of the battle round /],movement:[/ movement phase /,/ climbs? /,/ normal move /,/ advances? /,/ charges? /,/ falls? back /,/ reacts? /,/ overwatch /,/ retreats? /,/ fly /,/ after this model has charged /,/ from reserves? /,/ can move across /,/ setup within /],psychic:[/ psychic /,/ deny the witch /,/ perils of the warp /,/ psychich /],shooting:[/ shooting phase /,/ shots? /,/ ballistic skill /,/ ranged /,/ range characteristic /,/ half range /,/ long range /,/ short range /,/ grenades? /,/ shoots? /,/ shooting /,/ fire[sd]+ /,/ firing /,/ obscured /,/ obcured /,/ order(ed)? /,/ voice of command /,/ invulnerable save /,/ demolition charges? /,/ liberator autostubs /,/ obscurred /,/ look out sir! /,/ pistol /,/ heavy weapons?/,/ add [0-9] to saving throws /],fight:[/ fight phase /,/ fights? /,/ weapon skill /,/ attacks characteristics? /,/ strength characteristics? /,/ piles? in /,/ consolidates? /,/ melee /,/ close combat /,/ death to the false emperor /,/ additional attacks? /,/ invulnerable save /,/ look out sir! /,/ intervening terrain /,/ terrain that is between the two models /,/ damage characteristic is [0-9] in a battle round in which this model charged /,/ add [0-9] to saving throws /],morale:[/ nerve /,/ leadership /]},(function(e,n){ce.some(e,(function(e){return e.test(t)}))&&a.push(n)})),!a.includes("fight")&&!a.includes("shooting")){ce.some([/ weapon /,/ hit rolls? /,/ attack(s|ing)? /,/ saves? /,/ saving throws? /,/ injury rolls? /,/ wound rolls? /,/ loses? a wound /,/ fall(ing)? damage /,/ the bearer is taken out of action /,/ toughness characteristic /,/ suffers? a mortal wound /,/ taken out of action /,/ this weapon/,/ reduced to 0 wounds /],(function(e){return e.test(t)}))&&a.push("fight","shooting")}return ce.forIn({deployment:[/ from reserve /],movement:[/ previous movement phase /,/ preceding movement phase /,/ if the firing model moved /,/ moved during the movement phase /,/ round in which it charges or is charged /,/ in which it made a successful charge /,/ even if it fell back in the movement phase /,/ model that can fly /,/ as if it were the movement phase /,/ stunned /,/ penalty for moving /,/ as if the model had remained stationary /,/ demolition charge /],psychic:[/ after all of this weapon's attacks have been resolved /],shooting:[/ when (it|this model) fires overwatch /,/ invulnerable save (against attacks made )?in the fight phase /,/ as if it were your shooting phase /,/ tactical support turret /,/ out of action in the shooting phase /,/ mordian /],fight:[/ the ordered model immediately fights /,/ shots equal to its attacks characteristic /,/ stunned /,/ target enemies at [0-9]{1,2}" or less /,/ within half range /,/ tactical support turret /],morale:[/ target model's leadership /,/ weapon against a model which has a leadership /,/ subtract 1 from its leadership /]},(function(e,n){ce.some(e,(function(e){return e.test(t)}))&&ce.remove(a,(function(e){return e===n}))})),a},ge=function(e){var t=se("roster:description",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:pe(t)}},fe=function(e){var t=se(".//roster:characteristic[@name='Description']",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:pe(t)}},Ee=function(e){var t=se(".//roster:characteristic[@name='Ability']",e)[0].childNodes[0].nodeValue;return{name:e.getAttribute("name"),description:t,phases:pe(t)}},ve=function(e){var t=se(".//roster:characteristic[@name='Psychic Power']",e)[0].childNodes[0].nodeValue,a=t.match(/warp charge value of ([0-9]+)\.(.*)/),n=null;return a.length>2&&(n=parseInt(a[1]),t=a[2]),{name:e.getAttribute("name"),charge:n,description:t}},be=function(e){var t=[/if a model/,/if the bearer/,/unless/];return ce.sum(ce.map([/Add ([1-9]{1}) to this model's Attacks characteristic/,/ ([1-9]|an|one|two) additional attack/,/(one) \(and only one\) attack with this weapon./],(function(a){var n=e.match(a);return n?ce.some(t,(function(t){return t.test(e)}))?0:"an"===n[1]||"one"===n[1]?1:"two"===n[1]?2:parseInt(n[1]||n[2]):0})))},ye=function(e){var t=[/models with this ability have a ([1-6]{1})\+ invulnerable save/,/has a ([1-6]{1})\+ invulnerable save($|\.|,| and| instead of)/,/has an invulnerable save of ([1-6]{1})\+/],a=ce.map(e,(function(e){return ce.min(ce.map(t,(function(t){var a=e.description.match(t);return a?parseInt(a[1]):null})))}));return ce.min(a)},we=function(e){var t=se(".//roster:profile[@typeName='Wargear']",e).map(Ee),a=se("roster:selections/roster:selection[roster:selections/roster:selection/roster:profiles/roster:profile/@typeName='Ability']",e),n=se(".//roster:profile[@typeName='Ability']",e).map(fe).concat(t),l={movement:ue("M",e),weapon_skill:ue("WS",e),ballistic_skill:ue("BS",e),strength:ue("S",e),toughness:ue("T",e),wounds:ue("W",e),attacks:ue("A",e),leadership:ue("Ld",e),save:ue("Sv",e),invulnerable_save:ye(n)},r={name:"Bare fists",range:"-",type:"Melee",strength:l.strength,armourPiercing:0,damage:1,abilities:"Default close combat weapon available to all models"},o=se(".//roster:profile[@typeName='Weapon']",e).map((function(e){return function(e,t){var a=de("S",e,!1);"User"===a&&(a=t);var n=/x([0-9]+)/i.exec(a);n&&(a=t*parseInt(n[1])),(n=/\+([0-9]+)/i.exec(a))&&(a=t+parseInt(n[1]));var l=de("Type",e,!1);return"Melee"!==l&&(l=l.split(" ").slice(0,-1).join(" ")),{name:e.getAttribute("name"),range:de("Range",e,!0),type:l,shots:de("Type",e,!1).split(" ").slice(-1)[0],strength:a,armourPiercing:de("AP",e,!0),damage:de("D",e,!1),abilities:de("Abilities",e,!1)}}(e,l.strength)})).concat([r]);l.additional_attacks=function(e,t){var a=ce.map(e,(function(e){return e.abilities})).concat(ce.map(t,(function(e){return e.description}))),n=ce.map(a,(function(e){return be(e)}));return ce.sum(n)}(o,n);var s=se("roster:selections/roster:selection/roster:profiles/roster:profile[@typeName='Psychic Power']",e).map(ve),c=se("roster:categories/roster:category[@primary='true']",e)[0].getAttribute("name"),m=se("roster:categories/roster:category[@primary='false' and starts-with(@name,'Faction: ')]",e),u=se("roster:categories/roster:category[@primary='false' and not(starts-with(@name,'Faction: '))]",e).map((function(e){return e.getAttribute("name")}));ce.remove(u,(function(e){return"Model"===e}));var d={name:e.getAttribute("customName"),type:e.getAttribute("name"),category:"Non-specialist"===c?null:c,stats:l,abilities:n,weapons:o,wargear:t,psychicPowers:s,specialism:a.length>0?a[0].getAttribute("name"):null,faction:m.length>0?m[0].getAttribute("name").split(": ",2)[1]:null,keywords:u,points:he(e)};return Object(i.a)(Object(i.a)({},d),{},{hash:me.hash(d)})},ke=function(e){var t,a=[],n=(new ie).parseFromString(e),l=se("/roster:roster",n)[0].getAttribute("name"),r=se("//roster:force/roster:rules/roster:rule",n).map(ge),o=Object(re.a)(se("//roster:force/roster:categories/roster:category",n));try{for(o.s();!(t=o.n()).done;){var s,c=t.value.getAttribute("entryId"),m=Object(re.a)(se("//roster:selection[@type='model' and roster:categories/roster:category/@entryId='".concat(c,"']"),n));try{for(m.s();!(s=m.n()).done;){var u=s.value;a.push(we(u))}}catch(h){m.e(h)}finally{m.f()}}}catch(h){o.e(h)}finally{o.f()}var d=ce.groupBy(a,(function(e){return e.hash}));return{name:l,forceRules:r,models:ce.map(d,(function(e){return Object(i.a)(Object(i.a)({},e[0]),{},{uuid:Object(oe.a)(),count:e.length,selected:e.length})}))}},Se=a(326),xe=function(e){return function(e){return"P"!==e[0]?Promise.resolve(e):(new Se).loadAsync(e).then((function(e){return e.file(/[^/]+\.ros/)[0].async("string")}))}(e).then(ke)},Ae=function(){var e=Object(le.a)(ne.a.mark((function e(t){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FileReader,e.abrupt("return",new Promise((function(e,n){a.onerror=function(){a.abort(),n(new DOMException("Problem parsing input file."))},a.onloadend=Object(le.a)(ne.a.mark((function t(){return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(xe(a.result));case 1:case"end":return t.stop()}}),t)}))),a.readAsBinaryString(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),n=t.call(this,e);var l={name:null,forceRules:[],models:[]};return n.state=l,n.handleUpload=function(e){var t;(t=e,Ae(t[0])).then((function(e){n.setState(e)}))},n.handleClose=function(){n.setState(l)},n.handleSelectionChanged=function(e,t){n.setState(Object(i.a)(Object(i.a)({},n.state),{},{models:n.state.models.map((function(a){return a.uuid!==e?a:Object(i.a)(Object(i.a)({},a),{},{selected:t})}))}))},n}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(te.a,{fluid:"lg"},0===this.state.models.length?l.a.createElement(b,{onUpload:this.handleUpload}):l.a.createElement(ee,{name:this.state.name,models:this.state.models,onClose:this.handleClose,forceRules:this.state.forceRules,onSelectionChanged:this.handleSelectionChanged}))}}]),a}(l.a.Component),Ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(340).a({dsn:"https://6fe3e632b45a44c086068e13f3b1a783@o464596.ingest.sentry.io/5473956"}),o.a.render(l.a.createElement(Ce,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dataslate",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dataslate","/service-worker.js");Ne?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Re(t,e)}))}}()}},[[181,1,2]]]);
//# sourceMappingURL=main.d0f48d8b.chunk.js.map