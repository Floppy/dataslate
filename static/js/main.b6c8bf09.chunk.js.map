{"version":3,"sources":["components/Intro.tsx","components/Homepage.tsx","components/KillTeam2018/Phase.tsx","components/AbilityList.tsx","components/KillTeam2018/StatsTable.tsx","components/KillTeam2018/SpecialistIcon.tsx","components/KillTeam2018/CategoryIcon.tsx","components/ModelTitle.tsx","components/KillTeam2018/NoPhaseDetails.tsx","components/StatBadge.tsx","components/KillTeam2018/MovementPhaseDetails.tsx","components/KillTeam2018/ScoutingPhaseDetails.tsx","components/KillTeam2018/DeploymentPhaseDetails.tsx","components/KillTeam2018/InitiativePhaseDetails.tsx","components/KillTeam2018/PsychicPowerList.tsx","components/KillTeam2018/PsychicPhaseDetails.tsx","components/KillTeam2018/WeaponList.tsx","components/KillTeam2018/ShootingPhaseDetails.tsx","components/KillTeam2018/FightPhaseDetails.tsx","components/KillTeam2018/MoralePhaseDetails.tsx","components/CloseButton.tsx","components/KillTeam2018/Roster.tsx","components/KillTeam2021/WeaponList.tsx","components/KillTeam2021/EquipmentList.tsx","components/KillTeam2021/ActionList.tsx","components/KillTeam2021/WoundTrack.tsx","components/KillTeam2021/AbilityList.tsx","components/KillTeam2021/Datasheet.tsx","components/KillTeam2021/RuleList.tsx","components/KillTeam2021/Roster.tsx","parsers/KillTeam2018/Abilities.ts","parsers/KillTeam2018/BattlescribeParser.js","parsers/KillTeam2021/BattlescribeParser.ts","FileLoader.ts","App.tsx","serviceWorker.js","index.tsx"],"names":["Intro","Jumbotron","className","Homepage","props","Row","Col","Card","Header","as","Body","style","minHeight","Text","href","onDrop","onUpload","accept","getRootProps","getInputProps","Alert","variant","textAlign","process","Phase","pageBreakAfter","background","color","padding","width","textTransform","display","name","flexGrow","note","children","AbilityList","abilities","phase","filter","x","phases","indexOf","length","highlight","Table","striped","bordered","size","_","sortBy","map","description","StatsTable","movement","weapon_skill","isNaN","ballistic_skill","strength","toughness","wounds","attacks","additional_attacks","leadership","save","invulnerable_save","points","SpecialistIcon","specialism","height","marginRight","alt","src","toLowerCase","CategoryIcon","category","ModelTitle","titleComponents","without","type","undefined","justifyContent","selected","join","slice","showSelector","value","slideStop","onSelectionChanged","uuid","target","step","max","count","min","NoPhaseDetails","model","weapons","w","concat","wargear","stats","sm","Badge","pill","faction","keywords","keyword","StatBadge","paddingTop","border","flexDirection","borderRadius","fontSize","fontWeight","lineHeight","secondaryValue","MovementPhaseDetails","ScoutingPhaseDetails","hasScoutingPhase","DeploymentPhaseDetails","hasDeploymentPhase","InitiativePhaseDetails","hasInitiativePhase","PsychicPowerList","powers","charge","PsychicPhaseDetails","psychicPowers","hasPsychicPhase","WeaponList","range","shots","armourPiercing","damage","ShootingPhaseDetails","hasRangedWeapons","userStrength","FightPhaseDetails","MoralePhaseDetails","CloseButton","Button","onClick","onClose","Roster","sortedModels","models","selectedModels","sumBy","forceRules","some","hit","criticalDamage","specialRules","criticalRules","EquipmentList","equipment","bg","cost","ActionList","actions","WoundTrack","title","repeat","Datasheet","i","actionPointLimit","groupActivation","defence","RuleList","rules","headingStyle","uniqBy","flatten","m","phasePatterns","scouting","deployment","initiative","psychic","shooting","fight","morale","genericPatterns","antiPatterns","calculatePhases","minDesc","replace","forIn","patterns","re","test","push","includes","remove","p","invulnerableSave","saves","a","pattern","match","parseInt","xpath","XPath","roster","stat","nodes","childNodes","nodeValue","weaponStat","weapon","numeric","costNode","getAttribute","parseForceRule","rule","parseAbility","ability","parseWargear","parsePsychicPower","power","warpChargeDescription","additionalAttacks","descriptions","d","sum","parseAdditionalAttacks","parseModel","specialismSelection","closeCombatWeapon","exec","weaponType","split","parseWeapon","details","hash","xpSelect","bs","node","toString","melee","startsWith","parseAction","action","parseEquipment","parseRule","factionKeywords","allKeywords","textContent","intersection","pop","unzip","file","charAt","jszip","JSZip","loadAsync","zip","async","parseFile","doc","DOMParserImpl","parseFromString","categoryId","uniqueModels","groupBy","system","uuidv4","parseKillTeam2018","parseKillTeam2021","Error","loadFile","reader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onloadend","content","result","readAsBinaryString","App","useState","setRoster","handleUpload","acceptedFiles","r","handleClose","isRosterKT18","Container","fluid","selectedCount","Object","assign","isRosterKT21","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","Sentry","dsn","ReactDOM","render","document","getElementById","URL","origin","addEventListener","fetch","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"qbAqBeA,MAlBf,WACE,OAAO,eAACC,EAAA,EAAD,WACL,2CAGA,mBAAGC,UAAU,OAAb,oEAGA,+BACE,yEACA,wEACA,sEACA,8DACA,qF,oCCoDSC,MA1Df,SAAkBC,GAChB,OAAO,qCACL,cAAC,EAAD,IACA,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAaC,GAAG,KAAhB,oBACA,eAACF,EAAA,EAAKG,KAAN,CAAWC,MAAO,CAACC,UAAW,QAA9B,UACE,eAACL,EAAA,EAAKM,KAAN,iCACsB,IACpB,mBAAGC,KAAK,4BAAR,0BAFF,OAIA,cAACP,EAAA,EAAKM,KAAN,sEAMN,cAACP,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAaC,GAAG,KAAhB,oBACA,cAACF,EAAA,EAAKG,KAAN,CAAWC,MAAO,CAACC,UAAW,QAA9B,SACE,cAAC,IAAD,CAAUG,OAAQX,EAAMY,SAAUC,OAAO,aAAzC,SACG,gBAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAjB,OACC,eAACC,EAAA,EAAD,yBAAOC,QAAQ,WAAcH,KAA7B,IAA6CP,MAAO,CAAEW,UAAW,UAAjE,UACE,qCAAWH,MACX,oFACA,4BAAG,6EAOf,cAACb,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACA,EAAA,EAAKC,OAAN,CAAaC,GAAG,KAAhB,oBACA,eAACF,EAAA,EAAKG,KAAN,CAAWC,MAAO,CAACC,UAAW,QAA9B,UACE,cAACL,EAAA,EAAKM,KAAN,4EAGA,cAACN,EAAA,EAAKM,KAAN,wDAOR,iDACa,mBAAGC,KAAK,uBAAR,mBADb,QAC0D,mBAAGA,KAAK,2BAAR,uBAD1D,uBAEoB,mBAAGA,KAAK,wBAAR,qCAFpB,iBAGc,mBAAGA,KAAK,sCAAR,yBAHd,qBAIkB,mBAAGA,KAAK,iDAAR,uBAJlB,cAKW,6BAAI,mBAAQA,KAAK,4CAAD,OAA8CS,YAA1D,SAA8FA,sBC7BlGC,MAzBf,SAAepB,GACb,OAAO,sBAAKO,MAAO,CACjBc,eAAgB,UADX,UAGL,qBAAId,MAAO,CACTe,WAAY,QACZC,MAAO,QACPC,QAAS,OACTC,MAAO,OACPC,cAAe,aACfC,QAAS,QANX,UAQE,eAACzB,EAAA,EAAD,WACGF,EAAM4B,KADT,YAGA,cAAC1B,EAAA,EAAD,CAAKK,MAAO,CAACsB,SAAU,EAAGX,UAAW,SAArC,SACGlB,EAAM8B,MACL,gCAAQ9B,EAAM8B,YAInB9B,EAAM+B,a,yBCOIC,MA1Bf,SAAqBhC,GACnB,IAAMiC,EAAYjC,EAAMkC,MACtBlC,EAAMiC,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAUD,EAAEC,OAAOC,QAAQtC,EAAMkC,QAAU,KAC5ElC,EAAMiC,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAA8B,IAApBD,EAAEC,OAAOE,UAChDtB,EAAUjB,EAAMwC,UAAY,UAAY,GAE9C,OAA4B,IAArBP,EAAUM,OAAe,6BAC9B,eAACE,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAAK3B,QAASA,EAA3C,UACE,gCACE,+BACE,yCACA,kDAGJ,gCACG4B,IAAEC,OAAOb,EAAW,CAAC,SAASc,KAAI,SAACX,GAAD,OACjC,+BACE,6BAAKA,EAAER,OACP,6BAAKQ,EAAEY,0BC2BJC,MAtCf,SAAqBjD,GACnB,OACE,eAACyC,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,UACE,gCACE,+BACE,mCACA,oCACA,oCACA,mCACA,mCACA,mCACA,mCACA,oCACA,oCACA,6CAGJ,gCACE,+BACE,+BAAK5C,EAAMkD,SAAX,OACA,+BAAKlD,EAAMmD,aAAX,OACA,6BAAKC,MAAMpD,EAAMqD,iBAAmB,IAAMrD,EAAMqD,gBAAgB,MAChE,6BAAKrD,EAAMsD,WACX,6BAAKtD,EAAMuD,YACX,6BAAKvD,EAAMwD,SACX,+BAAKxD,EAAMyD,QACTzD,EAAM0D,mBAAqB,mCAAS,KAAM1D,EAAM0D,sBAA+B,QAEjF,6BAAK1D,EAAM2D,aACX,+BAAK3D,EAAM4D,KAAX,IACE5D,EAAM6D,kBAAoB,qCAAG,MAAM,mCAAS7D,EAAM6D,kBAAf,WAAkD,QACvF,6BAAK7D,EAAM8D,kB,SC3Cd,SAASC,EAAe/D,GAC7B,OAAQA,EAAMgE,WACV,qBAAKlE,UAAU,aAAaS,MAAO,CAAC0D,OAAQ,MAAOC,YAAa,QAASC,IAAKnE,EAAMgE,WAAYI,IAAG,iBAAYpE,EAAMgE,WAAWK,cAA7B,UACnG,6BCHC,SAASC,EAAatE,GAC3B,OAAQA,EAAMuE,UAA6C,eAAjCvE,EAAMuE,SAASF,eAAmE,wBAAjCrE,EAAMuE,SAASF,cACtF,qBAAKvE,UAAU,WAAWS,MAAO,CAAC0D,OAAQ,MAAOC,YAAa,QAASC,IAAKnE,EAAMuE,SAAUH,IAAG,iBAAYpE,EAAMuE,SAASF,cAA3B,UAC/F,6B,sBCUC,SAASG,EAAWxE,GACzB,IAQMyE,EAAkB5B,IAAE6B,QAAQ,CAChC1E,EAAM2E,KACc,eAAnB3E,EAAMuE,UAAgD,wBAAnBvE,EAAMuE,SACtCvE,EAAMgE,WACNhE,EAAMuE,UACV,UAAMK,EAAW,IACnB,OACE,qBAAIrE,MAfe,CACnBe,WAAY,YACZC,MAAO,QACPC,QAAS,MACTG,QAAS,OACTF,MAAO,OACPoD,eAAgB,iBAShB,UACE,eAAC3E,EAAA,EAAD,WACGF,EAAMuE,UAAYvE,EAAMgE,aAAkC,eAAnBhE,EAAMuE,UAAgD,wBAAnBvE,EAAMuE,WAAuC,cAACR,EAAD,CAAgBC,WAAYhE,EAAMgE,aACzJhE,EAAMuE,UAAY,cAACD,EAAD,CAAcC,SAAUvE,EAAMuE,WAChDvE,EAAM8E,SAAW,GAChB,kCAAQ9E,EAAM8E,SAAd,SAEF,mCAASL,EAAgB,GAAzB,OACA,gCAAQ5B,IAAEkC,KAAKlC,IAAEmC,MAAMP,EAAgB,GAAI,WAE5CzE,EAAMiF,cACL,cAAC/E,EAAA,EAAD,CAAKK,MAAO,CAACsB,SAAU,GAAvB,SACE,cAAC,IAAD,CACEqD,MAAOlF,EAAM8E,SACbK,UAAW,SAAC/C,GAAD,OAAYpC,EAAMoF,oBAAsBpF,EAAMoF,mBAAmBpF,EAAMqF,KAAMjD,EAAEkD,OAAOJ,QACjGK,KAAM,EACNC,IAAKxF,EAAMyF,MACXC,IAAK,SCvCV,SAASC,EAAe3F,GAC7B,OACE,eAACC,EAAA,EAAD,CAAKH,UAAWE,EAAM4F,MAAMd,SAAW,EAAI,WAAa,WAAxD,UACE,eAAC5E,EAAA,EAAD,WACE,cAACsE,EAAD,2BAAgBxE,EAAM4F,OAAtB,IAA6BX,cAAY,EAACG,mBAAoBpF,EAAMoF,sBAC1C,cAAzBpF,EAAM4F,MAAMrB,UAA4B,yDAA2B,iCAASvE,EAAM4F,MAAM5B,gBACzF,4BAAIhE,EAAM4F,MAAMC,QAAQ9C,KAAI,SAAC+C,GAAD,OAAQA,EAAElE,QAAOmE,OAAO/F,EAAM4F,MAAMI,QAAQjD,KAAI,SAAC+C,GAAD,OAAQA,EAAElE,SAAQmD,KAAK,QACnG,cAAC,EAAD,2BAAgB/E,EAAM4F,MAAMK,OAA5B,IAAmCnC,OAAQ9D,EAAM4F,MAAM9B,UACvD,cAAC,EAAD,CAAa7B,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,QAEvD,cAAChC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,gCACE,cAACC,EAAA,EAAD,CAAOC,MAAI,EAACnF,QAAQ,UAAUnB,UAAU,OAAOS,MAAO,CACpDmB,cAAe,YACfwC,YAAa,OACbvC,QAAS,SAHX,SAKG3B,EAAM4F,MAAMS,UAEdrG,EAAM4F,MAAMU,SAASvD,KAAI,SAACwD,GAAD,OACxB,cAACJ,EAAA,EAAD,CAAOC,MAAI,EAACnF,QAAQ,YAAYnB,UAAU,OAAOS,MAAO,CACtDmB,cAAe,YACfwC,YAAa,OACbvC,QAAS,SAHX,SAKG4E,eC7BR,SAASC,EAAWxG,GAwBzB,OACE,sBAAKF,UAAU,iBAAiBS,MAxBC,CACjCkG,WAAY,OACZC,OAAQ,kBACRjF,MAAO,MACPwC,OAAQ,MACR3C,WAAY,QACZC,MAAO,QACPI,QAAS,OACTgF,cAAe,SACfzF,UAAW,SACX0F,aAAc,OAcd,UACE,qBAAK9G,UAAU,OAAOS,MAbQ,CAChCsG,SAAU,MACVC,WAAY,OACZC,WAAY,MACZxF,MAAO,WASL,SAAyCvB,EAAM4B,OAC/C,sBAAK9B,UAAU,QAAQS,MARQ,CACjCsG,SAAU,QACVE,WAAY,MACZD,WAAY,QAKV,UACI9G,EAAMkF,MACNlF,EAAMgH,eACJ,gCAAQhH,EAAMgH,iBACd,mCC5BL,SAASC,EAAqBjH,GACnC,OACE,eAACC,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAa3D,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,gBAEvD,cAAChC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM/C,iBCVjD,SAASgE,EAAqBlH,GACnC,OACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAa3D,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,kBAMtD,SAASiF,EAAiBvB,GAC/B,OAASA,EAAM3D,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAUD,EAAEC,OAAOC,QAAQ,aAAe,KAAKC,OAAS,ECZ7F,SAAS6E,EAAuBpH,GACrC,OACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAa3D,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,oBAMtD,SAASmF,EAAmBzB,GACjC,OAASA,EAAM3D,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAUD,EAAEC,OAAOC,QAAQ,eAAiB,KAAKC,OAAS,ECZ/F,SAAS+E,EAAuBtH,GACrC,OACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAa3D,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,oBAMtD,SAASqF,EAAmB3B,GACjC,OAASA,EAAM3D,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAUD,EAAEC,OAAOC,QAAQ,eAAiB,KAAKC,OAAS,ECUvFiF,MAvBf,SAA0BxH,GACxB,OAA+B,IAAxBA,EAAMyH,OAAOlF,OAAe,6BACjC,eAACE,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,UACE,gCACE,+BACE,uCACA,6CACA,kDAGJ,gCACGC,IAAEC,OAAO9C,EAAMyH,OAAQ,CAAC,SAAS1E,KAAI,SAACX,GAAD,OACpC,+BACE,6BAAKA,EAAER,OACP,6BAAKQ,EAAEsF,SACP,6BAAKtF,EAAEY,0BCbZ,SAAS2E,EAAoB3H,GAClC,OACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAkB6B,OAAQzH,EAAM4F,MAAMgC,gBACtC,cAAC,EAAD,CAAa3F,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,iBAMtD,SAAS2F,EAAgBjC,GAC9B,OAAQA,EAAMgC,cAAcrF,OAAS,GAAMqD,EAAM3D,UAAUE,QAAO,SAACC,GAAD,OAAQA,EAAEC,QAAUD,EAAEC,OAAOC,QAAQ,YAAc,KAAKC,OAAS,ECwBtHuF,MArCf,SAAoB9H,GAClB,IAAM6F,EAA0B,aAAhB7F,EAAMkC,MAClBlC,EAAM6F,QAAQ1D,QAAO,SAACC,GAAD,MAAmB,UAAXA,EAAEuC,QAC/B3E,EAAM6F,QAAQ1D,QAAO,SAACC,GAAD,MAAmB,UAAXA,EAAEuC,QAEnC,OAA0B,IAAnBkB,EAAQtD,OAAe,6BAC5B,eAACE,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,UACE,gCACE,+BACE,wCACiB,aAAhB5C,EAAMkC,OAAwB,uCACd,aAAhBlC,EAAMkC,OAAwB,sCACd,aAAhBlC,EAAMkC,OAAwB,uCAC/B,mCACA,oCACA,mCACA,gDAGJ,gCACGW,IAAEC,OAAO+C,EAAS,CAAC,SAAS9C,KAAI,SAACX,GAAD,OAC/B,+BACE,oBAAI7B,MAAO,CAAC,WAAc,UAA1B,SAAsC6B,EAAER,OACvB,aAAhB5B,EAAMkC,OAAwB,+BAAKE,EAAE2F,MAAP,OACd,aAAhB/H,EAAMkC,OAAwB,oBAAI3B,MAAO,CAAC,WAAc,UAA1B,SAAsC6B,EAAEuC,OACtD,aAAhB3E,EAAMkC,OAAwB,oBAAI3B,MAAO,CAAC,WAAc,UAA1B,SAAsC6B,EAAE4F,QACvE,6BAAK5F,EAAEkB,WACP,6BAAKlB,EAAE6F,iBACP,6BAAK7F,EAAE8F,SACP,6BAAK9F,EAAEH,wBC3BZ,SAASkG,EAAqBnI,GACnC,OACE,eAACC,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACrBwC,EAAiBpI,EAAM4F,QAAU,cAAC,EAAD,CAAYC,QAAS7F,EAAM4F,MAAMC,QAAS3D,MAAM,WAAWmG,aAAcrI,EAAM4F,MAAMK,MAAM3C,WAC7H,cAAC,EAAD,CAAarB,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,gBAEvD,eAAChC,EAAA,EAAD,CAAKgG,GAAG,OAAR,UACGkC,EAAiBpI,EAAM4F,QAAU,cAACY,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM5C,iBAAmB2D,eAAe,MACrH,cAACR,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM1C,gBAElD,eAACrD,EAAA,EAAD,CAAKgG,GAAG,OAAR,UACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMrC,MAAQoD,eAAe,MACtEhH,EAAM4F,MAAMK,MAAMpC,kBAChB,cAAC2C,EAAD,CAAW5E,KAAK,MAAMsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMpC,mBAAqBmD,eAAe,MACtF,mCAOL,SAASoB,EAAiBxC,GAC/B,OAAQxC,MAAMwC,EAAMK,MAAM5C,kBAAqBuC,EAAMC,QAAQ1D,QAAO,SAACC,GAAD,MAAmB,UAAXA,EAAEuC,QAAmBpC,OAAS,ECxBrG,SAAS+F,EAAkBtI,GAChC,OACE,eAACC,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAYC,QAAS7F,EAAM4F,MAAMC,QAAS3D,MAAM,QAAQmG,aAAcrI,EAAM4F,MAAMK,MAAM3C,WACxF,cAAC,EAAD,CAAarB,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,aAEvD,eAAChC,EAAA,EAAD,CAAKgG,GAAG,OAAR,UACE,cAACM,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMxC,SAAWuD,eAAiBhH,EAAM4F,MAAMK,MAAMvC,mBAAlB,WAA2C1D,EAAM4F,MAAMK,MAAMvC,oBAAuB,OAChK,cAAC8C,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM1C,gBAElD,eAACrD,EAAA,EAAD,CAAKgG,GAAG,OAAR,UACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM9C,cAAgB6D,eAAe,MAChF,cAACR,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMrC,MAAQoD,eAAe,MACtEhH,EAAM4F,MAAMK,MAAMpC,kBAChB,cAAC2C,EAAD,CAAW5E,KAAK,MAAMsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMpC,mBAAqBmD,eAAe,MACtF,mCClBL,SAASuB,EAAmBvI,GACjC,OACE,eAACC,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACtB,cAAC,EAAD,CAAa3D,UAAWjC,EAAM4F,MAAM3D,UAAWC,MAAM,cAEvD,cAAChC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMtC,mB,aCblD,SAAS6E,EAAYxI,GAC1B,OAAQ,cAACyI,EAAA,EAAD,CAAQxH,QAAQ,UAAUnB,UAAU,eAAe4I,QAAS1I,EAAM2I,QAAlE,mBCkBH,SAASC,EAAO5I,GAErB,IAAM6I,EAAehG,IAAEC,OAAO9C,EAAM8I,QAAQ,SAAC1G,GAAD,MAAe,CAAe,MAAdA,EAAEmC,SAAkBnC,EAAEmC,SAAUnC,EAAEuC,SAExFoE,EAAiBlG,IAAEV,OAAO0G,GAAc,SAACzG,GAAD,OAAeA,EAAE0C,SAAW,KAC1E,OAAO,qCACL,qBAAIvE,MAAO,CACTe,WAAY,QACZC,MAAO,QACPC,QAAS,OACTC,MAAO,OACPC,cAAe,aACfC,QAAS,QANX,UAQE,cAACzB,EAAA,EAAD,UACGF,EAAM4B,OAET,cAAC1B,EAAA,EAAD,CAAKK,MAAO,CAACsB,SAAU,EAAGX,UAAW,SAArC,SACE,kCAAQ2B,IAAEmG,MAAMhJ,EAAM8I,QAAQ,SAAClD,GAAD,OAAmBA,EAAMd,SAAWc,EAAM9B,UAAxE,WAEF,cAAC5D,EAAA,EAAD,CAAKK,MAAO,CAACsB,SAAU,EAAGX,UAAW,SAArC,SACE,cAACsH,EAAD,CAAaG,QAAS3I,EAAM2I,eAGhC,qCACE,cAAC,EAAD,CAAa1G,UAAWjC,EAAMiJ,WAAY/G,MAAM,GAAGM,WAAS,IAC3DqG,EAAa9F,KAAI,SAAC6C,GAAD,OAChB,cAACD,EAAD,CAAgBC,MAAOA,EAAOR,mBAAoBpF,EAAMoF,2BAG3DvC,IAAEqG,KAAKH,EAAgB5B,IACtB,cAAC,EAAD,CAAOvF,KAAK,WAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,WAAWM,WAAS,IACnEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClBuB,EAAiBvB,IACjB,cAACsB,EAAD,CAAsBtB,MAAOA,YAKpC/C,IAAEqG,KAAKH,EAAgB1B,IACtB,cAAC,EAAD,CAAOzF,KAAK,aAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,aAAaM,WAAS,IACrEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClByB,EAAmBzB,IACnB,cAACwB,EAAD,CAAwBxB,MAAOA,YAKtC/C,IAAEqG,KAAKH,EAAgBxB,IACtB,cAAC,EAAD,CAAO3F,KAAK,aAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,aAAaM,WAAS,IACrEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClB2B,EAAmB3B,IACnB,cAAC0B,EAAD,CAAwB1B,MAAOA,YAKvC,cAAC,EAAD,CAAOhE,KAAK,WAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,WAAWM,WAAS,IACnEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClB,cAACqB,EAAD,CAAsBrB,MAAOA,YAIlC/C,IAAEqG,KAAKH,EAAgBlB,IACtB,cAAC,EAAD,CAAOjG,KAAK,UAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,UAAUM,WAAS,IAClEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClBiC,EAAgBjC,IAChB,cAAC+B,EAAD,CAAqB/B,MAAOA,YAKpC,cAAC,EAAD,CAAOhE,KAAK,WAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,WAAWM,WAAS,IACnEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClB,cAACuC,EAAD,CAAsBvC,MAAOA,YAInC,cAAC,EAAD,CAAOhE,KAAK,QAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,QAAQM,WAAS,IAChEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClB,cAAC0C,EAAD,CAAmB1C,MAAOA,YAIhC,cAAC,EAAD,CAAOhE,KAAK,SAAZ,SACE,qCACE,cAAC,EAAD,CAAaK,UAAWjC,EAAMiJ,WAAY/G,MAAM,SAASM,WAAS,IACjEuG,EAAehG,KAAI,SAAC6C,GAAD,OAClB,cAAC2C,EAAD,CAAoB3C,MAAOA,eCxH9B,SAASkC,EAAW9H,GACzB,OACE,mCACE,eAACyC,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,UACE,gCACE,+BACE,wCACA,yCACA,qCACA,wCACA,0CACA,uCACA,+CAGJ,gCACG5C,EAAM6F,QAAQ9C,KAAI,SAACX,GAAD,OACjB,+BACE,oBAAI7B,MAAO,CAAC,WAAc,UAA1B,SAAsC6B,EAAER,OACxC,6BAAKQ,EAAEqB,UACP,+BAAKrB,EAAE+G,IAAP,OACA,6BAAK/G,EAAE8F,SACP,6BAAK9F,EAAEgH,iBACP,6BAAKhH,EAAEiH,eACP,6BAAKjH,EAAEkH,6BCxBd,SAASC,EAAcvJ,GAC5B,OAAkC,IAA3BA,EAAMwJ,UAAUjH,OAAe,6BACpC,eAACpC,EAAA,EAAD,CAAMuG,OAAO,YAAY+C,GAAG,QAA5B,UACE,cAACtJ,EAAA,EAAKC,OAAN,CAAaG,MAAO,CAAEe,WAAY,sBAAuBwF,WAAY,QAArE,uBAGA,cAAC3G,EAAA,EAAKG,KAAN,UACGN,EAAMwJ,UAAUzG,KAAI,SAACX,GAAD,OACnB,8BACE,mCAASA,EAAER,KAAX,KAAmBQ,EAAEsH,KAArB,YACCtH,EAAEY,uBCTR,SAAS2G,GAAW3J,GACzB,OAAO,mCACJ6C,IAAEC,OAAO9C,EAAM4J,QAAS,CAAC,SAAS7G,KAAI,SAACX,GAAD,OACrC,eAACjC,EAAA,EAAD,CAAMuG,OAAO,UAAU+C,GAAG,QAA1B,UACE,cAACtJ,EAAA,EAAKC,OAAN,CAAaG,MAAO,CAAEe,WAAY,UAAWC,MAAO,QAASuF,WAAY,QAAzE,SACG1E,EAAER,OAEL,cAACzB,EAAA,EAAKG,KAAN,UACG8B,EAAEY,sBCTN,SAAS6G,GAAW7J,GACzB,OAAO,cAACyC,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,SACL,+BACE,6BAAK5C,EAAM8J,QACX,6BAAK,gBAAMC,OAAO/J,EAAMwD,eCefxB,OAlBf,SAAqBhC,GACnB,OAAkC,IAA3BA,EAAMiC,UAAUM,OAAe,6BACpC,eAACpC,EAAA,EAAD,CAAMuG,OAAO,YAAY+C,GAAG,QAA5B,UACE,cAACtJ,EAAA,EAAKC,OAAN,CAAaG,MAAO,CAAEe,WAAY,sBAAuBwF,WAAY,QAArE,uBAGA,cAAC3G,EAAA,EAAKG,KAAN,UACGuC,IAAEC,OAAO9C,EAAMiC,UAAW,CAAC,SAASc,KAAI,SAACX,GAAD,OACvC,8BACE,mCAASA,EAAER,KAAX,QACCQ,EAAEY,wBCFR,SAASgH,GAAUhK,GACxB,OACE,eAACC,EAAA,EAAD,CAAKH,UAAWE,EAAM4F,MAAMd,SAAW,EAAI,WAAa,WAAxD,UACE,eAAC5E,EAAA,EAAD,WACE,cAACsE,EAAD,eAAgBxE,EAAM4F,QACrB/C,IAAEkF,MAAM,EAAE/H,EAAM4F,MAAMd,SAAS,GAAG/B,KAAI,SAACkH,GAAD,OACrC,cAACJ,GAAD,CAAYrG,OAAQxD,EAAM4F,MAAMK,MAAMzC,OAAQsG,MAAO9J,EAAM4F,MAAMhE,MAAZ,UAAuB5B,EAAM4F,MAAMjB,KAAnC,YAA4C3E,EAAM4F,MAAMd,SAAW,EAAImF,EAAI,SAElI,cAAC,EAAD,CAAYpE,QAAS7F,EAAM4F,MAAMC,UACjC,eAAC5F,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,WACE,cAACqJ,EAAD,CAAeC,UAAWxJ,EAAM4F,MAAM4D,YACtC,cAAC,GAAD,CAAavH,UAAWjC,EAAM4F,MAAM3D,eAEtC,cAAC/B,EAAA,EAAD,UACE,cAACyJ,GAAD,CAAYC,QAAS5J,EAAM4F,MAAMgE,kBAIvC,eAAC1J,EAAA,EAAD,CAAKgG,GAAG,OAAR,UACE,gCACE,eAACC,EAAA,EAAD,CAAOC,MAAI,EAACnF,QAAQ,UAAUnB,UAAU,OAAOS,MAAO,CACpDmB,cAAe,YACfwC,YAAa,OACbvC,QAAS,SAHX,UAKG3B,EAAM4F,MAAMS,QALf,mBAOCrG,EAAM4F,MAAMU,SAASvD,KAAI,SAACwD,GAAD,OACxB,cAACJ,EAAA,EAAD,CAAOC,MAAI,EAACnF,QAAQ,YAAYnB,UAAU,OAAOS,MAAO,CACtDmB,cAAe,YACfwC,YAAa,OACbvC,QAAS,SAHX,SAKG4E,UAIP,eAACtG,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAM/C,SAAvB,cAE3B,cAAChD,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,IAAIsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMzC,eAGpD,eAACvD,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,MAAMsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMiE,sBAEpD,cAAChK,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMkE,wBAGrD,eAAClK,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMmE,aAEnD,cAAClK,EAAA,EAAD,CAAKgG,GAAG,OAAR,SACE,cAACM,EAAD,CAAW5E,KAAK,KAAKsD,MAAK,UAAKlF,EAAM4F,MAAMK,MAAMrC,KAAvB,kBCnE/B,SAASyG,GAASrK,GACvB,OAA8B,IAAvBA,EAAMsK,MAAM/H,OAAe,6BAChC,eAACE,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,KAAK,KAA7B,UACE,gCACE,+BACE,sCACA,kDAGJ,gCACGC,IAAEC,OAAO9C,EAAMsK,MAAO,CAAC,SAASvH,KAAI,SAACX,GAAD,OACnC,+BACE,6BAAKA,EAAER,OACP,6BAAKQ,EAAEY,yBCRZ,SAAS4F,GAAO5I,GACrB,IAAMuK,EAAe,CACnBjJ,WAAY,QACZC,MAAO,QACPC,QAAS,OACTC,MAAO,OACPE,QAAS,QAEX,OAAO,qCACL,qBAAIpB,MAAOgK,EAAX,UACE,cAACrK,EAAA,EAAD,UACGF,EAAM4B,OAET,cAAC1B,EAAA,EAAD,CAAKK,MAAO,CAACsB,SAAU,EAAGX,UAAW,SAArC,SACE,cAACsH,EAAD,CAAaG,QAAS3I,EAAM2I,eAG/B3I,EAAM8I,OAAO/F,KAAI,SAAC6C,GAAD,OACd,cAACoE,GAAD,CAAWpE,MAAOA,OAEtB,oBAAIrF,MAAOgK,EAAX,mBACA,cAACF,GAAD,CAAUC,MAAOzH,IAAE2H,OAAO3H,IAAE4H,QAAQzK,EAAM8I,OAAO/F,KAAI,SAAC2H,GAAD,OAAQA,EAAEJ,UAAU,a,8DChCvEK,GAAgB,CACpBC,SAAU,CACR,cAEFC,WAAY,CACV,kCACA,WACA,iBAEFC,WAAY,CACV,+BACA,mCACA,0CAEF5H,SAAU,CACR,mBACA,YACA,gBACA,cACA,aACA,gBACA,YACA,cACA,cACA,QACA,iCACA,mBACA,oBACA,kBAEF6H,QAAS,CACP,YACA,mBACA,uBACA,cAEFC,SAAU,CACR,mBACA,WACA,oBACA,WACA,yBACA,eACA,eACA,gBACA,cACA,YACA,aACA,cACA,WACA,aACA,YACA,eACA,qBACA,sBACA,wBACA,wBACA,cACA,kBACA,WACA,kBACA,gCAEFC,MAAO,CACL,gBACA,YACA,iBACA,6BACA,8BACA,cACA,kBACA,UACA,iBACA,+BACA,wBACA,sBACA,kBACA,wBACA,2CACA,iFACA,gCAEFC,OAAQ,CACN,UACA,iBAIEC,GAAkB,CACtB,WACA,eACA,mBACA,WACA,mBACA,kBACA,iBACA,mBACA,sBACA,sCACA,6BACA,4BACA,wBACA,eACA,yBAGIC,GAAe,CACnBP,WAAY,CACV,kBAEF3H,SAAU,CACR,4BACA,6BACA,8BACA,oCACA,4CACA,yCACA,+CACA,uBACA,qCACA,YACA,uBACA,4CACA,uBAEF6H,QAAS,CACP,2DAEFC,SAAU,CACR,yCACA,iEACA,sCACA,4BACA,wCACA,aAEFC,MAAO,CACL,yCACA,8CACA,YACA,0CACA,sBACA,6BAEFC,OAAQ,CACN,8BACA,kDACA,qCAISG,GAAkB,SAACrI,GAC9B,IAAMsI,EAAU,IAAMtI,EAAYqB,cAAckH,QAAQ,UAAW,IAAM,IACnElJ,EAAoB,GAmB1B,OAlBAQ,IAAE2I,MAAMb,IAAe,SAACc,EAAUvJ,GAC5BW,IAAEqG,KAAKuC,GAAU,SAACC,GAAD,OAASA,EAAGC,KAAKL,OACpCjJ,EAAOuJ,KAAK1J,MAIXG,EAAOwJ,SAAS,UAAaxJ,EAAOwJ,SAAS,aAC5ChJ,IAAEqG,KAAKiC,IAAiB,SAACO,GAAD,OAASA,EAAGC,KAAKL,OAC3CjJ,EAAOuJ,KAAK,QAAS,YAIzB/I,IAAE2I,MAAMJ,IAAc,SAACK,EAAUvJ,GAC3BW,IAAEqG,KAAKuC,GAAU,SAACC,GAAD,OAASA,EAAGC,KAAKL,OACpCzI,IAAEiJ,OAAOzJ,GAAQ,SAAC0J,GAAD,OAAQA,IAAM7J,QAI5BG,GA4BI2J,GAAmB,SAAC/J,GAC/B,IAAMwJ,EAAW,CACf,iEACA,gEACA,4CAEIQ,EAAQpJ,IAAEE,IAAId,GAAW,SAACiK,GAC9B,OAAOrJ,IAAE6C,IAAI7C,IAAEE,IAAI0I,GAAU,SAACU,GAC5B,IAAMC,EAAQF,EAAElJ,YAAYoJ,MAAMD,GAClC,OAAIC,EACKC,SAASD,EAAM,IAEjB,YAGX,OAAOvJ,IAAE6C,IAAIuG,IClNTK,GAAQC,iBAAoB,CAAEC,OAAQ,oDAEtCC,GAAO,SAAC7K,EAAMgE,GAClB,IAAM8G,EAAQJ,GAAM,mFAAD,OAAoF1K,EAApF,MAA8FgE,GACjH,OAAI8G,EAAMnK,OAAS,EACV8J,SAASK,EAAM,GAAGC,WAAW,GAAGC,WACzB,IAGZC,GAAa,SAACjL,EAAMkL,EAAQC,GAChC,IAAML,EAAQJ,GAAM,uDAAD,OAAwD1K,EAAxD,MAAkEkL,GACrF,OAAIJ,EAAMnK,OAAS,EACVwK,EAAUV,SAASK,EAAM,GAAGC,WAAW,GAAGC,WAAaF,EAAM,GAAGC,WAAW,GAAGC,UACvE,IAGZ9I,GAAS,SAAC8B,GACd,IAAMoH,EAAWV,GAAM,2CAA8C1G,GACrE,OAAO/C,IAAEmG,MAAMgE,GAAU,SAAC5K,GAAD,OAAOiK,SAASjK,EAAE6K,aAAa,cAGpDC,GAAiB,SAACC,GACtB,IAAMnK,EAAcsJ,GAAM,qBAAsBa,GAAM,GAAGR,WAAW,GAAGC,UACvE,MAAO,CACLhL,KAAMuL,EAAKF,aAAa,QACxBjK,cACAX,OAAQgJ,GAAgBrI,KAItBoK,GAAe,SAACC,GACpB,IAAMrK,EAAcsJ,GAAM,gDAAiDe,GAAS,GAAGV,WAAW,GAAGC,UACrG,MAAO,CACLhL,KAAMyL,EAAQJ,aAAa,QAC3BjK,cACAX,OAAQgJ,GAAgBrI,KA+BtBsK,GAAe,SAACtH,GACpB,IAAMhD,EAAcsJ,GAAM,4CAA6CtG,GAAS,GAAG2G,WAAW,GAAGC,UACjG,MAAO,CACLhL,KAAMoE,EAAQiH,aAAa,QAC3BjK,cACAX,OAAQgJ,GAAgBrI,KAItBuK,GAAoB,SAACC,GACzB,IAAIxK,EAAcsJ,GAAM,kDAAmDkB,GAAO,GAAGb,WAAW,GAAGC,UAC7Fa,EAAwBzK,EAAYoJ,MAAM,uCAC5C1E,EAAS,KAKb,OAJI+F,EAAsBlL,OAAS,IACjCmF,EAAS2E,SAASoB,EAAsB,IACxCzK,EAAcyK,EAAsB,IAE/B,CACL7L,KAAM4L,EAAMP,aAAa,QACzBvF,SACA1E,gBAIS0K,GAAoB,SAAC7H,EAAS5D,GACzC,IAAM0L,EAAe9K,IAAEE,IAAI8C,GAAS,SAACC,GAAD,OAAOA,EAAE7D,aAAW8D,OAAOlD,IAAEE,IAAId,GAAW,SAACiK,GAAD,OAAOA,EAAElJ,gBACnFS,EAAUZ,IAAEE,IAAI4K,GAAc,SAACC,GAAD,OD8EA,SAAC5K,GACrC,IAKMoI,EAAe,CACnB,aACA,gBACA,UAEF,OAAOvI,IAAEgL,IAAIhL,IAAEE,IAVE,CACf,wDACA,wCACA,oDAO2B,SAACoJ,GAC5B,IAAMC,EAAQpJ,EAAYoJ,MAAMD,GAChC,OAAIC,EACEvJ,IAAEqG,KAAKkC,GAAc,SAACM,GAAD,OAASA,EAAGC,KAAK3I,MACjC,EAEQ,OAAboJ,EAAM,IAA4B,QAAbA,EAAM,GAAqB,EACnC,QAAbA,EAAM,GAAqB,EACxBC,SAASD,EAAM,IAAMA,EAAM,IAE7B,MCnGkC0B,CAAuBF,MAClE,OAAO/K,IAAEgL,IAAIpK,IAGTsK,GAAa,SAACnI,GAClB,IAAMI,EAAUsG,GAAM,yCAA0C1G,GAAO7C,IAAIuK,IACrEU,EAAsB1B,GAAM,4HAA6H1G,GACzJ3D,EAAYqK,GAAM,yCAA0C1G,GAAO7C,IAAIqK,IAAcrH,OAAOC,GAC5FC,EAAQ,CACZ/C,SAAUuJ,GAAK,IAAK7G,GACpBzC,aAAcsJ,GAAK,KAAM7G,GACzBvC,gBAAiBoJ,GAAK,KAAM7G,GAC5BtC,SAAUmJ,GAAK,IAAK7G,GACpBrC,UAAWkJ,GAAK,IAAK7G,GACrBpC,OAAQiJ,GAAK,IAAK7G,GAClBnC,QAASgJ,GAAK,IAAK7G,GACnBjC,WAAY8I,GAAK,KAAM7G,GACvBhC,KAAM6I,GAAK,KAAM7G,GACjB/B,kBAAmBmI,GAAiB/J,IAEhCgM,EAAoB,CACxBrM,KAAM,aACNmG,MAAO,IACPpD,KAAM,QACNrB,SAAU2C,EAAM3C,SAChB2E,eAAgB,EAChBC,OAAQ,EACRjG,UAAW,uDAEP4D,EAAUyG,GAAM,wCAAyC1G,GAAO7C,KAAI,SAACX,GAAD,OAlFxD,SAAC0K,EAAQzE,GAC3B,IAAI/E,EAAWuJ,GAAW,IAAKC,GAAQ,GACtB,SAAbxJ,IACFA,EAAW+E,GAEb,IAAI+D,EAAQ,aAAa8B,KAAK5K,GAC1B8I,IACF9I,EAAW+E,EAAegE,SAASD,EAAM,MAE3CA,EAAQ,cAAc8B,KAAK5K,MAEzBA,EAAW+E,EAAegE,SAASD,EAAM,KAE3C,IAAI+B,EAAatB,GAAW,OAAQC,GAAQ,GAE5C,MADmB,UAAfqB,IAA0BA,EAAaA,EAAWC,MAAM,KAAKpJ,MAAM,GAAI,GAAGD,KAAK,MAC5E,CACLnD,KAAMkL,EAAOG,aAAa,QAC1BlF,MAAO8E,GAAW,QAASC,GAAQ,GACnCnI,KAAMwJ,EACNnG,MAAO6E,GAAW,OAAQC,GAAQ,GAAOsB,MAAM,KAAKpJ,OAAO,GAAG,GAC9D1B,WACA2E,eAAgB4E,GAAW,KAAMC,GAAQ,GACzC5E,OAAQ2E,GAAW,IAAKC,GAAQ,GAChC7K,UAAW4K,GAAW,YAAaC,GAAQ,IA2DqCuB,CAAYjM,EAAG6D,EAAM3C,aAAYyC,OAAO,CAACkI,IAC3HhI,EAAMvC,mBAAqBgK,GAAkB7H,EAAS5D,GACtD,IAAM2F,EAAgB0E,GAAM,+FAAgG1G,GAAO7C,IAAIwK,IACjIhJ,EAAW+H,GAAM,qDAAsD1G,GAAO,GAAGqH,aAAa,QAC9F5G,EAAUiG,GAAM,yFAA0F1G,GAC1GU,EAAWgG,GAAM,8FAA+F1G,GAAO7C,KAAI,SAACX,GAAD,OAAOA,EAAE6K,aAAa,WACvJpK,IAAEiJ,OAAOxF,GAAU,SAAClE,GAAD,MAAc,UAANA,KAC3B,IAAMkM,EAAU,CACd1M,KAAMgE,EAAMqH,aAAa,cACzBtI,KAAMiB,EAAMqH,aAAa,QACzB1I,SAAuB,mBAAbA,EAAgC,KAAOA,EACjD0B,QACAhE,YACA4D,UACAG,UACA4B,gBACA5D,WAAYgK,EAAoBzL,OAAS,EAAIyL,EAAoB,GAAGf,aAAa,QAAU,KAC3F5G,QAASA,EAAQ9D,OAAS,EAAI8D,EAAQ,GAAG4G,aAAa,QAAQmB,MAAM,KAAM,GAAG,GAAK,KAClF9H,WACAxC,OAAQA,GAAO8B,IAEjB,OAAO,2BAAK0I,GAAZ,IAAqBC,KAAMA,KAAK,IAAIA,KAAKD,MC7IrCE,GAAWjC,iBAAoB,CAAEkC,GAAI,oDAErChC,GAAO,SAAC7K,EAAcgE,GAC1B,IAAM8I,EAAOF,GAAS,2EAAD,OAA4E5M,EAA5E,aAA6FgE,GAAO,GACzH,OAAI8I,EACKrC,SAASqC,EAAKC,YACP,GAGZN,GAAc,SAACvB,GACnB,MAAO,CACLlL,KAAM4M,GAAS,gBAAiB1B,GAAQ,GAAM6B,WAC9CC,MAAOJ,GAAS,gBAAiB1B,GAAQ,GAAM6B,WAAWE,WAAW,UACrEpL,QAAS4I,SAASmC,GAAS,yCAA0C1B,GAAQ,GAAM6B,YACnFxF,IAAKkD,SAASmC,GAAS,6CAA8C1B,GAAQ,GAAM6B,YACnFzG,OAAQmE,SAASmC,GAAS,yCAA0C1B,GAAQ,GAAM6B,WAAWP,MAAM,KAAK,IACxG/E,cAAemF,GAAS,0CAA2C1B,GAAQ,IAAS,KAAK6B,WACzFvF,eAAgBiD,SAASmC,GAAS,yCAA0C1B,GAAQ,GAAM6B,WAAWP,MAAM,KAAK,IAChH9E,eAAgBkF,GAAS,yCAA0C1B,GAAQ,IAAS,KAAK6B,aAIvFvB,GAAe,SAACC,GACpB,MAAO,CACLzL,KAAM4M,GAAS,gBAAiBnB,GAAS,GAAMsB,WAC/C3L,aAAcwL,GAAS,+CAAgDnB,GAAS,IAAS,KAAKsB,WAC9FtM,OAAQ,KAINyM,GAAc,SAACC,GACnB,MAAO,CACLnN,KAAM4M,GAAS,gBAAiBO,GAAQ,GAAMJ,WAC9C3L,aAAcwL,GAAS,qDAAsDO,GAAQ,IAAS,KAAKJ,WACnGjF,KAAM,IAIJsF,GAAiB,SAACxF,GACtB,MAAO,CACL5H,KAAM4M,GAAS,gBAAiBhF,GAAW,GAAMmF,WACjDjF,KAAM2C,SAASmC,GAAS,4BAA6BhF,GAAW,GAAMmF,YACtE3L,aAAcwL,GAAS,iDAAkDhF,GAAW,IAAS,KAAKmF,aAIhGM,GAAY,SAAC9B,GACjB,MAAO,CACLvL,KAAM4M,GAAS,gBAAiBrB,GAAM,GAAMwB,WAC5C3L,aAAcwL,GAAS,2BAA4BrB,GAAM,IAAS,KAAKwB,WACvEtM,OAAQ,KAIN6M,GAAkB,CACtB,cACA,kBACA,gBACA,aACA,aACA,cACA,eACA,cACA,YACA,cACA,aACA,eACA,eACA,iBACA,WACA,eACA,wBACA,gBACA,aACA,uBACA,SACA,qBAGInB,GAAa,SAACnI,GAClB,IAAMuJ,EAAeX,GAAS,oDAAqD5I,GAAkB7C,KAAI,SAACX,GAAD,OAAQA,EAAEgN,aAAe,IAAI7D,QAAQ,eAAK,OAC7IlF,EAAUxD,IAAEwM,aAAaF,EAAaD,IAAiBI,OAAS,KAChEhJ,EAAWzD,IAAEiJ,OAAOqD,GAAa,SAAC/M,GAAD,OAAQA,IAAMiE,KAC/CiI,EAAU,CACd1M,KAAM4M,GAAS,sBAAuB5I,GAAO,GAAM+I,WACnDhK,KAAM6J,GAAS,gBAAiB5I,GAAO,GAAM+I,WAC7C1I,MAAO,CACL/C,SAAUuJ,GAAK,IAAK7G,GACpBsE,iBAAkBuC,GAAK,MAAO7G,GAC9BuE,gBAAiBsC,GAAK,KAAM7G,GAC5BwE,QAASqC,GAAK,KAAM7G,GACpBhC,KAAM6I,GAAK,KAAM7G,GACjB/B,kBAAmB,KACnBL,OAAQiJ,GAAK,IAAK7G,IAEpBC,QAAU2I,GAAS,qCAAsC5I,GAAkB7C,IAAIsL,IAC/E7E,UAAYgF,GAAS,mEAAoE5I,GAAkB7C,IAAIiM,IAC/G/M,UAAYuM,GAAS,uCAAwC5I,GAAkB7C,IAAIqK,IACnFxD,QAAU4E,GAAS,4CAA6C5I,GAAkB7C,IAAI+L,IACtFxE,MAAQkE,GAAS,sBAAuB5I,GAAkB7C,IAAIkM,IAC9D3I,WACAD,UACAhB,KAAM,GACNI,MAAO,EACPX,SAAU,GAEZ,OAAO,2BAAKwJ,GAAZ,IAAqBC,KAAMA,OAAOA,KAAK,CAAC5J,KAAM2J,EAAQ3J,KAAMkB,QAASyI,EAAQzI,QAAS2D,UAAW8E,EAAQ9E,e,+BCzGrGgF,GAAWjC,iBAAoB,CAAEkC,GAAI,oDAErCc,GAAK,uCAAG,WAAOC,GAAP,iBAAAtD,EAAA,yDACW,MAAnBsD,EAAKC,OAAO,GADJ,yCAEHD,GAFG,cAIJE,EAAQ,IAAIC,KAJR,SAKQD,EAAME,UAAUJ,GALxB,cAKJK,EALI,yBAMHA,EAAIL,KAAK,cAAc,GAAGM,MAAM,WAN7B,2CAAH,sDAULC,GAAY,SAACP,GACjB,IAAMQ,GAAM,IAAIC,kBAAgBC,gBAAgBV,GAEhD,OADsBhB,GAAS,2BAA4BwB,GAAK,GAAepD,WAE7E,IAAK,sBACH,OF8H8B,SAACoD,GACnC,IAD2C,EACrClH,EAAS,GACTlH,EAAO0K,GAAM,iBAAkB0D,GAAK,GAAG/C,aAAa,QACpDhE,EAAaqD,GAAM,0CAA2C0D,GAAKjN,IAAImK,IAHlC,eAIpBZ,GAAM,mDAAoD0D,IAJtC,IAI3C,2BAAuF,CAAC,IAAD,EAC/EG,EAD+E,QACzDlD,aAAa,WAD4C,eAEjEX,GAAM,oFAAD,OAAqF6D,EAArF,MAAqGH,IAFzC,IAErF,2BAAoI,CAAC,IAA1HpK,EAAyH,QAClIkD,EAAO8C,KAAKmC,GAAWnI,KAH4D,gCAJ5C,8BAU3C,IAAMwK,EAAevN,IAAEwN,QAAQvH,GAAQ,SAAC4B,GAAD,OAAOA,EAAE6D,QAChD,MAAO,CACL+B,OAAQ,eACR1O,OACAqH,aACAH,OAAQjG,IAAEE,IAAIqN,GAAc,SAACxK,GAAD,mBAAC,eACxBA,EAAM,IADiB,IAE1BP,KAAMkL,eACN9K,MAAOG,EAAMrD,OACbuC,SAAUc,EAAMrD,aEjJTiO,CAAkBR,GAC3B,IAAK,sBACH,ODyF8B,SAACA,GACnC,IAD+D,EACzDlH,EAAS,GACTlH,EAAO4M,GAAS,2BAA4BwB,GAAK,GAAMrB,WAFE,eAG3CH,GAAS,gCAAmCwB,IAHD,IAG/D,2BAAmF,CAAC,IAAzEpK,EAAwE,QACjFkD,EAAO8C,KAAKmC,GAAWnI,KAJsC,8BAM/D,IAAMwK,EAAevN,IAAEwN,QAAQvH,GAAQ,SAAC4B,GAAD,OAAOA,EAAE6D,QAChD,MAAO,CACL+B,OAAQ,eACR1O,OACAkH,OAAQjG,IAAEE,IAAIqN,GAAc,SAACxK,GAAD,mBAAC,eACxBA,EAAM,IADiB,IAE1BP,KAAMkL,eACN9K,MAAOG,EAAMrD,OACbuC,SAAUc,EAAMrD,aCvGTkO,CAAkBT,GAC3B,QACE,MAAM,IAAIU,MAAM,8BAITC,GAAQ,uCAAG,WAAOnB,GAAP,eAAAtD,EAAA,6DAChB0E,EAAS,IAAIC,WADG,kBAEf,IAAIC,SAAQ,SAACC,EAASC,GAC3BJ,EAAOK,QAAU,WACfL,EAAOM,QACPF,EAAO,IAAIG,aAAa,iCAE1BP,EAAOQ,UAAP,sBAAmB,8BAAAlF,EAAA,6DACXmF,EAAUT,EAAOU,OADN,SAEE/B,GAAM8B,GAFR,OAEX7B,EAFW,OAGjBuB,EAAQhB,GAAUP,IAHD,2CAKnBoB,EAAOW,mBAAmB/B,OAZN,2CAAH,sDC1Bd,SAASgC,KAEd,MAA4BC,mBAAqC,MAAjE,mBAAOjF,EAAP,KAAekF,EAAf,KAEMC,EAAY,uCAAG,WAAOC,GAAP,eAAA1F,EAAA,sEDuCdyE,GCtCqBiB,EDsCN,ICvCD,OACbC,EADa,OAEnBH,EAAUG,GAFS,2CAAH,sDAKZC,EAAc,WAClBJ,EAAU,OAgBNK,EAAe,SAACvF,GAAD,MAA0D,iBAAlBA,EAAO8D,QAGpE,OACE,eAAC0B,GAAA,EAAD,CAAWC,MAAM,KAAjB,UACc,OAAXzF,EAAkB,cAAC,EAAD,CAAU5L,SAAU+Q,IAAmB,6BACzDnF,GAAUuF,EAAavF,GAAU,cAAC5D,EAAD,CAAgBhH,KAAM4K,EAAO5K,KAAMkH,OAAQ0D,EAAO1D,OAAQH,QAASmJ,EAAa7I,WAAYuD,EAAOvD,WAAY7D,mBAnBtH,SAACC,EAAc6M,GACxC1F,GAAUuF,EAAavF,IACzBkF,EAAUS,OAAOC,OAAO,CAACtJ,OAAQ0D,EAAO1D,OAAO/F,KAAI,SAAC6C,GAAD,OACjDA,EAAMP,OAASA,EACXO,EACAuM,OAAOC,OACLxM,EACA,CAAEd,SAAUoN,QAEf1F,OAU6L,6BACjMA,GANgB,SAACA,GAAD,MAA0D,iBAAlBA,EAAO8D,OAMrD+B,CAAa7F,GAAU,cAAC,GAAD,CAAgB5K,KAAM4K,EAAO5K,KAAMkH,OAAQ0D,EAAO1D,OAAQH,QAASmJ,IAAkB,gCC9B7H,IAAMQ,GAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAStG,MACvB,2DAsCN,SAASuG,GAAiBC,EAAOC,GAC/BC,UAAUC,cACPC,SAASJ,GACTK,MAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACfT,UAAUC,cAAcS,YAI1BC,QAAQC,IACN,iHAKEb,GAAUA,EAAOc,UACnBd,EAAOc,SAAST,KAMlBO,QAAQC,IAAI,sCAGRb,GAAUA,EAAOe,WACnBf,EAAOe,UAAUV,WAO5BW,OAAM,SAAAC,GACLL,QAAQK,MAAM,4CAA6CA,M,OCxFjEC,EAAY,CACVC,IAAK,8EAQPC,IAASC,OAAO,cAAC1C,GAAD,IAAS2C,SAASC,eAAe,SDK1C,SAAmBvB,GACxB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIuB,IAAIlT,GAAwBqR,OAAOC,SAAS/R,MACpD4T,SAAW9B,OAAOC,SAAS6B,OAIvC,OAGF9B,OAAO+B,iBAAiB,QAAQ,WAC9B,IAAM3B,EAAK,UAAMzR,GAAN,sBAEPmR,KAgEV,SAAkCM,EAAOC,GAEvC2B,MAAM5B,GACHK,MAAK,SAAAwB,GAEJ,IAAMC,EAAcD,EAASE,QAAQC,IAAI,gBAEnB,MAApBH,EAASI,QACO,MAAfH,IAA8D,IAAvCA,EAAYpS,QAAQ,cAG5CwQ,UAAUC,cAAc+B,MAAM7B,MAAK,SAAAC,GACjCA,EAAa6B,aAAa9B,MAAK,WAC7BT,OAAOC,SAASuC,eAKpBrC,GAAgBC,EAAOC,MAG1BgB,OAAM,WACLJ,QAAQC,IACN,oEArFAuB,CAAwBrC,EAAOC,GAI/BC,UAAUC,cAAc+B,MAAM7B,MAAK,WACjCQ,QAAQC,IACN,iHAMJf,GAAgBC,EAAOC,OC7B/BE,K","file":"static/js/main.b6c8bf09.chunk.js","sourcesContent":["import React from 'react';\nimport { Jumbotron } from 'react-bootstrap'\n\nfunction Intro() {\n  return <Jumbotron>\n    <h1>\n      Dataslate\n    </h1>\n    <p className='lead'>\n      Easy-to-use datasheets for Warhammer 40,000: Kill Team\n    </p>\n    <ul>\n      <li>All the info you need, when you need it</li>\n      <li>Stats and abilities organised by phase</li>\n      <li>No wasted space for identical models</li>\n      <li>Designed for print or screen</li>\n      <li>Clear, uncluttered layout for easy reference</li>\n    </ul>\n  </Jumbotron>\n}\n\nexport default Intro;\n","import React from 'react';\nimport Dropzone from 'react-dropzone'\nimport type { DropzoneOptions } from 'react-dropzone'\nimport Intro from './Intro'\nimport { Row, Col, Alert, Card } from 'react-bootstrap'\n\ntype Props = {\n  onUpload: DropzoneOptions[\"onDrop\"],\n}\n\nfunction Homepage(props: Props) {\n  return <>\n    <Intro />\n    <Row>\n      <Col>\n        <Card>\n          <Card.Header as=\"h3\">Step 1</Card.Header>\n          <Card.Body style={{minHeight: '12em'}}>\n            <Card.Text>\n              Build your force in{' '}\n              <a href='https://battlescribe.net/'>Battlescribe</a>.\n            </Card.Text>\n            <Card.Text>\n              Currently only Kill Team rosters are supported.\n            </Card.Text>\n          </Card.Body>\n        </Card>\n      </Col>\n      <Col>\n        <Card>\n          <Card.Header as=\"h3\">Step 2</Card.Header>\n          <Card.Body style={{minHeight: '12em'}}>\n            <Dropzone onDrop={props.onUpload} accept='.ros,.rosz'>\n              {({ getRootProps, getInputProps }) => (\n                <Alert variant='primary' {...getRootProps()} style={{ textAlign: 'center' }}>\n                  <input {...getInputProps()} />\n                  <p>Drop your roster file here, or click to select one.</p>\n                  <p><em>(*.rosz and *.ros accepted)</em></p>\n                </Alert>\n              )}\n            </Dropzone>\n          </Card.Body>\n        </Card>\n      </Col>\n      <Col>\n        <Card>\n          <Card.Header as=\"h3\">Step 3</Card.Header>\n          <Card.Body style={{minHeight: '12em'}}>\n            <Card.Text>\n              Print your datasheets out, and never forget an ability again!\n            </Card.Text>\n            <Card.Text>\n              Prepare to dominate your foes!\n            </Card.Text>\n          </Card.Body>\n        </Card>\n      </Col>\n    </Row>\n    <footer>\n      Built with <a href='https://reactjs.org/'>React</a> and <a href='https://getbootstrap.com'>Bootstrap</a>.\n      Icons courtesy of <a href='https://killteam.app/'>Companion for Kill Team</a>.\n      Released as <a href='https://github.com/floppy/dataslate'>Open Source</a>,\n      report problems <a href='https://github.com/floppy/dataslate/issues/new'>on GitHub</a>.\n      Version: <em><a {...{href: `https://github.com/floppy/dataslate/tree/${process.env.REACT_APP_GIT_SHA}`}} >{process.env.REACT_APP_GIT_SHA}</a></em>\n    </footer>\n  </>\n}\n\nexport default Homepage;\n","import React from 'react';\nimport { Col } from 'react-bootstrap'\n\ntype Props = {\n  name: string,\n  note?: string,\n  children: React.ReactNode,\n};\n\nfunction Phase(props: Props) {\n  return <div style={{\n    pageBreakAfter: 'always',\n  }}>\n    <h1 style={{\n      background: 'black',\n      color: 'white',\n      padding: '10px',\n      width: '100%',\n      textTransform: 'capitalize',\n      display: 'flex',\n    }}>\n      <Col>\n        {props.name} Phase\n      </Col>\n      <Col style={{flexGrow: 0, textAlign: 'right'}}>\n        {props.note && (\n          <small>{props.note}</small>\n        )}\n      </Col>\n    </h1>\n    {props.children}\n  </div>\n}\n\nexport default Phase;\n","import React from 'react';\nimport { Ability } from '../types/Ability';\nimport { Table } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  abilities: Ability[],\n  phase: string,\n  highlight?: boolean,\n};\n\nfunction AbilityList(props: Props) {\n  const abilities = props.phase ?\n    props.abilities.filter((x) => (x.phases && x.phases.indexOf(props.phase) >= 0)) :\n    props.abilities.filter((x) => (x.phases && x.phases.length === 0))\n  const variant = props.highlight ? \"primary\" : \"\";\n\n  return abilities.length === 0 ? <></> : (\n    <Table striped bordered size=\"sm\" variant={variant}>\n      <thead>\n        <tr>\n          <th>Ability</th>\n          <th>Description</th>\n        </tr>\n      </thead>\n      <tbody>\n        {_.sortBy(abilities, ['name']).map((x: Ability) => (\n          <tr>\n            <td>{x.name}</td>\n            <td>{x.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default AbilityList;\n","import React from 'react'\nimport { Table } from 'react-bootstrap'\n\ntype Props = {\n  movement: number,\n  weapon_skill: number,\n  ballistic_skill: number,\n  strength: number,\n  toughness: number,\n  wounds: number,\n  attacks: number,\n  additional_attacks: number,\n  leadership: number,\n  save: number,\n  invulnerable_save: number,\n  points: number,\n}\n\nfunction StatsTable (props: Props) {\n  return (\n    <Table striped bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>M</th>\n          <th>WS</th>\n          <th>BS</th>\n          <th>S</th>\n          <th>T</th>\n          <th>W</th>\n          <th>A</th>\n          <th>Ld</th>\n          <th>Sv</th>\n          <th>Points</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>{props.movement}&quot;</td>\n          <td>{props.weapon_skill}+</td>\n          <td>{isNaN(props.ballistic_skill) ? '-' : props.ballistic_skill+\"+\"}</td>\n          <td>{props.strength}</td>\n          <td>{props.toughness}</td>\n          <td>{props.wounds}</td>\n          <td>{props.attacks}\n          { props.additional_attacks ? <strong>{' +'}{props.additional_attacks}</strong> : null}\n          </td>\n          <td>{props.leadership}</td>\n          <td>{props.save}+\n          { props.invulnerable_save ? <>{' / '}<strong>{props.invulnerable_save}++</strong></> : null}</td>\n          <td>{props.points}</td>\n        </tr>\n      </tbody>\n    </Table>\n  )\n}\n\nexport default StatsTable\n","import React from 'react';\n\ntype Props = {\n  specialism: string;\n};\n\nexport function SpecialistIcon(props: Props) {\n  return (props.specialism\n    ? <img className='specialism' style={{height: '1em', marginRight: '10px'}} alt={props.specialism} src={`/icons/${props.specialism.toLowerCase()}.svg`}/>\n    : <></>\n  );\n}\n","import React from 'react';\n\ntype Props = {\n  category: string;\n};\n\nexport function CategoryIcon(props: Props) {\n  return (props.category && props.category.toLowerCase() !== 'specialist' && props.category.toLowerCase() !== 'specialist retainer'\n    ? <img className='category' style={{height: '1em', marginRight: '10px'}} alt={props.category} src={`/icons/${props.category.toLowerCase()}.svg`}/>\n    : <></>\n);\n}\n","import React from 'react';\nimport { SpecialistIcon } from './KillTeam2018/SpecialistIcon';\nimport { CategoryIcon } from './KillTeam2018/CategoryIcon';\nimport { Col } from 'react-bootstrap'\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport _ from 'lodash'\n\ntype Props = {\n  showSelector?: boolean,\n  onSelectionChanged?: (uuid: string, value: number) => void,\n  selected: number,\n  count: number,\n  uuid: string,\n  name: string,\n  type: string,\n  category?: string,\n  specialism?: string,\n};\n\nexport function ModelTitle(props: Props) {\n  const headingStyle = {\n    background: 'lightgrey',\n    color: 'black',\n    padding: '5px',\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'space-between',\n  }\n  const titleComponents = _.without([\n    props.type,\n    (props.category === \"Specialist\" || props.category === \"Specialist Retainer\"\n      ? props.specialism\n      : props.category)\n  ],null, undefined, \"\");\n  return (\n    <h2 style={headingStyle}>\n      <Col>\n        {props.category && props.specialism && (props.category === \"Specialist\" || props.category === \"Specialist Retainer\") && <SpecialistIcon specialism={props.specialism} />}\n        {props.category && <CategoryIcon category={props.category} />}\n        {props.selected > 1 && (\n          <small>{props.selected} x </small>\n        )}\n        <strong>{titleComponents[0]} </strong>\n        <small>{_.join(_.slice(titleComponents,1), \", \")}</small>\n      </Col>\n      {props.showSelector && (\n        <Col style={{flexGrow: 0}}>\n          <ReactBootstrapSlider\n            value={props.selected}\n            slideStop={(x: any) => props.onSelectionChanged && props.onSelectionChanged(props.uuid, x.target.value)}\n            step={1}\n            max={props.count}\n            min={0} />\n        </Col>\n      )}\n    </h2>\n  );\n}\n","import React from 'react';\nimport StatsTable from './StatsTable';\nimport AbilityList from '../AbilityList';\nimport { Badge } from 'react-bootstrap'\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n  onSelectionChanged: (uuid: string, value: number) => void,\n};\n\nexport function NoPhaseDetails(props: Props) {\n  return (\n    <Row className={props.model.selected > 0 ? \"included\" : \"excluded\"}>\n      <Col>\n        <ModelTitle {...props.model} showSelector onSelectionChanged={props.onSelectionChanged} />\n        {props.model.category === \"Commander\" && <div>Commander specialism: <strong>{props.model.specialism}</strong></div>}\n        <p>{props.model.weapons.map((w) => (w.name)).concat(props.model.wargear.map((w) => (w.name))).join(\", \")}</p>\n        <StatsTable {...props.model.stats} points={props.model.points} />\n        <AbilityList abilities={props.model.abilities} phase=''/>\n      </Col>\n      <Col sm='auto'>\n        <div>\n          <Badge pill variant=\"primary\" className=\"mb-2\" style={{\n            textTransform: \"uppercase\",\n            marginRight: \"10px\",\n            display: \"block\",\n          }}>\n            {props.model.faction}\n          </Badge>\n          {props.model.keywords.map((keyword: string) => (\n            <Badge pill variant=\"secondary\" className=\"mb-2\" style={{\n              textTransform: \"uppercase\",\n              marginRight: \"10px\",\n              display: \"block\",\n            }}>\n              {keyword}\n            </Badge>\n          ))}\n        </div>\n      </Col>\n    </Row>\n  );\n}\n","import React from 'react'\nimport CSS from 'csstype'\n\ntype Props = {\n  name: string,\n  value: string,\n  secondaryValue?: string | null,\n}\n\nexport function StatBadge (props: Props) {\n  const badgeStyle: CSS.Properties = {\n    paddingTop: '.2vw',\n    border: '1px solid black',\n    width: '5vw',\n    height: '5vw',\n    background: 'black',\n    color: 'white',\n    display: 'flex',\n    flexDirection: 'column',\n    textAlign: 'center',\n    borderRadius: '25%',\n  };\n  const nameStyle: CSS.Properties = {\n    fontSize: '1vw',\n    fontWeight: 'bold',\n    lineHeight: '1vw',\n    color: '#FF6F2D',\n  };\n  const valueStyle: CSS.Properties = {\n    fontSize: '2.5vw',\n    lineHeight: '3vw',\n    fontWeight: 'bold'\n  }\n  return (\n    <div className='statbadge mb-4' style={badgeStyle}>\n      <div className='name' style={nameStyle}>{props.name}</div>\n      <div className='value' style={valueStyle}>\n        { props.value }\n        { props.secondaryValue\n          ? <small>{props.secondaryValue}</small>\n          : <></>\n        }\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport AbilityList from '../AbilityList';\nimport { StatBadge } from '../StatBadge';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\n\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function MovementPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <AbilityList abilities={props.model.abilities} phase='movement'/>\n      </Col>\n      <Col sm='auto'>\n        <StatBadge name=\"M\" value={`${props.model.stats.movement}`}/>\n      </Col>\n    </Row>\n  );\n}\n","import React from 'react';\nimport AbilityList from '../AbilityList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function ScoutingPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <AbilityList abilities={props.model.abilities} phase='scouting'/>\n      </Col>\n    </Row>\n  );\n}\n\nexport function hasScoutingPhase(model: Model) {\n  return ((model.abilities.filter((x) => (x.phases && x.phases.indexOf(\"scouting\") >= 0))).length > 0)\n}\n","import React from 'react';\nimport AbilityList from '../AbilityList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function DeploymentPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <AbilityList abilities={props.model.abilities} phase='deployment'/>\n      </Col>\n    </Row>\n  );\n}\n\nexport function hasDeploymentPhase(model: Model) {\n  return ((model.abilities.filter((x) => (x.phases && x.phases.indexOf(\"deployment\") >= 0))).length > 0)\n}\n","import React from 'react';\nimport AbilityList from '../AbilityList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function InitiativePhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <AbilityList abilities={props.model.abilities} phase='initiative'/>\n      </Col>\n    </Row>\n  );\n}\n\nexport function hasInitiativePhase(model: Model) {\n  return ((model.abilities.filter((x) => (x.phases && x.phases.indexOf(\"initiative\") >= 0))).length > 0)\n}\n","import React from 'react';\nimport { PsychicPower } from '../../types/KillTeam2018';\nimport { Table } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  powers: PsychicPower[],\n};\n\nfunction PsychicPowerList(props: Props) {\n  return props.powers.length === 0 ? <></> : (\n    <Table striped bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>Power</th>\n          <th>Warp Charge</th>\n          <th>Description</th>\n        </tr>\n      </thead>\n      <tbody>\n        {_.sortBy(props.powers, ['name']).map((x: PsychicPower) => (\n          <tr>\n            <td>{x.name}</td>\n            <td>{x.charge}</td>\n            <td>{x.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default PsychicPowerList;\n","import React from 'react';\nimport AbilityList from '../AbilityList';\nimport PsychicPowerList from './PsychicPowerList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function PsychicPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <PsychicPowerList powers={props.model.psychicPowers}/>\n        <AbilityList abilities={props.model.abilities} phase='psychic'/>\n      </Col>\n    </Row>\n  );\n}\n\nexport function hasPsychicPhase(model: Model) {\n  return (model.psychicPowers.length > 0 || (model.abilities.filter((x) => (x.phases && x.phases.indexOf(\"psychic\") >= 0))).length > 0)\n}\n","import React from 'react';\nimport { Weapon } from '../../types/KillTeam2018';\nimport { Table } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  weapons: Weapon[],\n  phase: string,\n  userStrength: number,\n};\n\nfunction WeaponList(props: Props) {\n  const weapons = props.phase === 'shooting'\n    ? props.weapons.filter((x) => (x.type !== \"Melee\"))\n    : props.weapons.filter((x) => (x.type === \"Melee\"))\n\n  return weapons.length === 0 ? <></> : (\n    <Table striped bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>Weapon</th>\n          {props.phase === \"shooting\" && <th>Range</th>}\n          {props.phase === \"shooting\" && <th>Type</th>}\n          {props.phase === \"shooting\" && <th>Shots</th>}\n          <th>S</th>\n          <th>AP</th>\n          <th>D</th>\n          <th>Abilities</th>\n        </tr>\n      </thead>\n      <tbody>\n        {_.sortBy(weapons, ['name']).map((x: Weapon) => (\n          <tr>\n            <td style={{\"whiteSpace\": \"nowrap\"}}>{x.name}</td>\n            {props.phase === \"shooting\" && <td>{x.range}&quot;</td>}\n            {props.phase === \"shooting\" && <td style={{\"whiteSpace\": \"nowrap\"}}>{x.type}</td>}\n            {props.phase === \"shooting\" && <td style={{\"whiteSpace\": \"nowrap\"}}>{x.shots}</td>}\n            <td>{x.strength}</td>\n            <td>{x.armourPiercing}</td>\n            <td>{x.damage}</td>\n            <td>{x.abilities}</td>\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default WeaponList;\n","import React from 'react';\nimport { StatBadge } from '../StatBadge';\nimport AbilityList from '../AbilityList';\nimport WeaponList from './WeaponList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\n\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function ShootingPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        {hasRangedWeapons(props.model) && <WeaponList weapons={props.model.weapons} phase='shooting' userStrength={props.model.stats.strength}/>}\n        <AbilityList abilities={props.model.abilities} phase='shooting'/>\n      </Col>\n      <Col sm='auto'>\n        {hasRangedWeapons(props.model) && <StatBadge name=\"BS\" value={`${props.model.stats.ballistic_skill}`} secondaryValue=\"+\"/>}\n        <StatBadge name=\"T\" value={`${props.model.stats.toughness}`}/>\n      </Col>\n      <Col sm='auto'>\n        <StatBadge name=\"Sv\" value={`${props.model.stats.save}`} secondaryValue=\"+\"/>\n        { props.model.stats.invulnerable_save\n          ? <StatBadge name=\"Inv\" value={`${props.model.stats.invulnerable_save}`} secondaryValue=\"+\"/>\n          : <></>\n        }\n      </Col>\n    </Row>\n  );\n}\n\nexport function hasRangedWeapons(model: Model) {\n  return !isNaN(model.stats.ballistic_skill) && (model.weapons.filter((x) => (x.type !== \"Melee\")).length > 0)\n}\n","import React from 'react';\nimport { StatBadge } from '../StatBadge';\nimport AbilityList from '../AbilityList';\nimport WeaponList from './WeaponList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\n\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function FightPhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <WeaponList weapons={props.model.weapons} phase='fight' userStrength={props.model.stats.strength}/>\n        <AbilityList abilities={props.model.abilities} phase='fight'/>\n      </Col>\n      <Col sm='auto'>\n        <StatBadge name=\"A\" value={`${props.model.stats.attacks}`} secondaryValue={ props.model.stats.additional_attacks ? `+${props.model.stats.additional_attacks}` : null}/>\n        <StatBadge name=\"T\" value={`${props.model.stats.toughness}`}/>\n      </Col>\n      <Col sm='auto'>\n        <StatBadge name=\"WS\" value={`${props.model.stats.weapon_skill}`} secondaryValue=\"+\"/>\n        <StatBadge name=\"Sv\" value={`${props.model.stats.save}`} secondaryValue=\"+\"/>\n        { props.model.stats.invulnerable_save\n          ? <StatBadge name=\"Inv\" value={`${props.model.stats.invulnerable_save}`} secondaryValue=\"+\"/>\n          : <></>\n        }\n      </Col>\n    </Row>\n  );\n}\n","import React from 'react';\nimport { StatBadge } from '../StatBadge';\nimport AbilityList from '../AbilityList';\nimport { Row, Col } from 'react-bootstrap'\nimport { ModelTitle } from '../ModelTitle';\n\nimport { Model } from '../../types/KillTeam2018';\n\ntype Props = {\n  model: Model\n};\n\nexport function MoralePhaseDetails(props: Props) {\n  return (\n    <Row>\n      <Col>\n        <ModelTitle {...props.model}/>\n        <AbilityList abilities={props.model.abilities} phase='morale'/>\n      </Col>\n      <Col sm='auto'>\n        <StatBadge name=\"Ld\" value={`${props.model.stats.leadership}`}/>\n      </Col>\n    </Row>\n  );\n}\n","import React, { MouseEvent } from 'react';\nimport { Button } from 'react-bootstrap';\n\ntype Props = {\n  onClose: (event: MouseEvent<HTMLButtonElement>) => void,\n};\n\nexport function CloseButton(props: Props) {\n  return (<Button variant=\"primary\" className='d-print-none' onClick={props.onClose}>Close</Button>);\n}\n","import React, { MouseEvent } from 'react';\nimport { Col } from 'react-bootstrap';\nimport { Model } from '../../types/KillTeam2018';\nimport { Ability } from '../../types/Ability';\nimport Phase from './Phase';\nimport AbilityList from '../AbilityList';\nimport { NoPhaseDetails } from './NoPhaseDetails';\nimport { MovementPhaseDetails } from './MovementPhaseDetails';\nimport { ScoutingPhaseDetails, hasScoutingPhase } from './ScoutingPhaseDetails';\nimport { DeploymentPhaseDetails, hasDeploymentPhase } from './DeploymentPhaseDetails';\nimport { InitiativePhaseDetails, hasInitiativePhase } from './InitiativePhaseDetails';\nimport { PsychicPhaseDetails, hasPsychicPhase } from './PsychicPhaseDetails';\nimport { ShootingPhaseDetails } from './ShootingPhaseDetails';\nimport { FightPhaseDetails } from './FightPhaseDetails';\nimport { MoralePhaseDetails } from './MoralePhaseDetails';\nimport { CloseButton } from '../CloseButton';\nimport _ from 'lodash'\n\ntype Props = {\n  name: string,\n  models: Model[],\n  forceRules: Ability[],\n  onClose: (event: MouseEvent<HTMLButtonElement>) => void,\n  onSelectionChanged: (uuid: string, value: number) => void,\n};\n\nexport function Roster(props: Props) {\n  // Display models sorted by category and type\n  const sortedModels = _.sortBy(props.models, (x: Model) => ([x.category == null, x.category, x.type]))\n  // Work out which models are actually selected\n  const selectedModels = _.filter(sortedModels, (x: Model) => (x.selected > 0))\n  return <>\n    <h1 style={{\n      background: 'black',\n      color: 'white',\n      padding: '10px',\n      width: '100%',\n      textTransform: 'capitalize',\n      display: 'flex',\n    }}>\n      <Col>\n        {props.name}\n      </Col>\n      <Col style={{flexGrow: 0, textAlign: 'right'}}>\n        <small>{_.sumBy(props.models, (model: Model) => (model.selected * model.points))}pts</small>\n      </Col>\n      <Col style={{flexGrow: 0, textAlign: 'right'}}>\n        <CloseButton onClose={props.onClose}/>\n      </Col>\n    </h1>\n    <>\n      <AbilityList abilities={props.forceRules} phase=\"\" highlight/>\n      {sortedModels.map((model: Model) => (\n        <NoPhaseDetails model={model} onSelectionChanged={props.onSelectionChanged}/>\n      ))}\n    </>\n    {_.some(selectedModels, hasScoutingPhase) &&\n      <Phase name=\"scouting\">\n        <>\n          <AbilityList abilities={props.forceRules} phase=\"scouting\" highlight/>\n          {selectedModels.map((model: Model) => (\n            hasScoutingPhase(model) &&\n            <ScoutingPhaseDetails model={model}/>\n          ))}\n        </>\n      </Phase>\n    }\n    {_.some(selectedModels, hasDeploymentPhase) &&\n      <Phase name=\"deployment\">\n        <>\n          <AbilityList abilities={props.forceRules} phase=\"deployment\" highlight/>\n          {selectedModels.map((model: Model) => (\n            hasDeploymentPhase(model) &&\n            <DeploymentPhaseDetails model={model}/>\n          ))}\n        </>\n      </Phase>\n    }\n    {_.some(selectedModels, hasInitiativePhase) &&\n      <Phase name=\"initiative\">\n        <>\n          <AbilityList abilities={props.forceRules} phase=\"initiative\" highlight/>\n          {selectedModels.map((model: Model) => (\n            hasInitiativePhase(model) &&\n            <InitiativePhaseDetails model={model}/>\n          ))}\n        </>\n      </Phase>\n    }\n    <Phase name=\"movement\">\n      <>\n        <AbilityList abilities={props.forceRules} phase=\"movement\" highlight/>\n        {selectedModels.map((model: Model) => (\n          <MovementPhaseDetails model={model}/>\n        ))}\n      </>\n    </Phase>\n    {_.some(selectedModels, hasPsychicPhase) &&\n      <Phase name=\"psychic\">\n        <>\n          <AbilityList abilities={props.forceRules} phase=\"psychic\" highlight/>\n          {selectedModels.map((model: Model) => (\n            hasPsychicPhase(model) &&\n            <PsychicPhaseDetails model={model}/>\n          ))}\n        </>\n      </Phase>\n    }\n    <Phase name=\"shooting\">\n      <>\n        <AbilityList abilities={props.forceRules} phase=\"shooting\" highlight />\n        {selectedModels.map((model: Model) => (\n          <ShootingPhaseDetails model={model}/>\n        ))}\n      </>\n    </Phase>\n    <Phase name=\"fight\">\n      <>\n        <AbilityList abilities={props.forceRules} phase=\"fight\" highlight/>\n        {selectedModels.map((model: Model) => (\n          <FightPhaseDetails model={model}/>\n        ))}\n      </>\n    </Phase>\n    <Phase name=\"morale\">\n      <>\n        <AbilityList abilities={props.forceRules} phase=\"morale\" highlight/>\n        {selectedModels.map((model: Model) => (\n          <MoralePhaseDetails model={model}/>\n        ))}\n      </>\n    </Phase>\n  </>\n}\n","import React from 'react';\nimport { Weapon } from '../../types/KillTeam2021';\nimport { Table } from 'react-bootstrap';\n\ntype Props = {\n  weapons: Weapon[],\n};\n\nexport function WeaponList(props: Props) {\n  return (\n    <>\n      <Table striped bordered size=\"sm\">\n        <thead>\n          <tr>\n            <th>Weapon</th>\n            <th>Attacks</th>\n            <th>Hit</th>\n            <th>Damage</th>\n            <th>Critical</th>\n            <th>Rules</th>\n            <th>Critical</th>\n          </tr>\n        </thead>\n        <tbody>\n          {props.weapons.map((x: Weapon) => (\n            <tr>\n              <td style={{\"whiteSpace\": \"nowrap\"}}>{x.name}</td>\n              <td>{x.attacks}</td>\n              <td>{x.hit}+</td>\n              <td>{x.damage}</td>\n              <td>{x.criticalDamage}</td>\n              <td>{x.specialRules}</td>\n              <td>{x.criticalRules}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </>\n  );\n}\n","import React from 'react';\nimport { Equipment } from '../../types/KillTeam2021';\nimport { Card } from 'react-bootstrap';\n\ntype Props = {\n  equipment: Equipment[],\n};\n\nexport function EquipmentList(props: Props) {\n  return props.equipment.length === 0 ? <></> : (\n    <Card border=\"secondary\" bg=\"light\">\n      <Card.Header style={{ background: \"rgba(0, 0, 0, 0.05)\", fontWeight: \"bold\"}}>\n        Equipment\n      </Card.Header>\n      <Card.Body>\n        {props.equipment.map((x: Equipment) => (\n          <p>\n            <strong>{x.name} ({x.cost} EP): </strong>\n            {x.description}\n          </p>\n        ))}\n      </Card.Body>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { Action } from '../../types/KillTeam2021';\nimport { Card } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  actions: Action[]\n};\n\nexport function ActionList(props: Props) {\n  return <>\n    {_.sortBy(props.actions, ['name']).map((x: Action) => (\n      <Card border=\"primary\" bg=\"light\">\n        <Card.Header style={{ background: \"#FF6F2D\", color: \"white\", fontWeight: \"bold\"}}>\n          {x.name}\n        </Card.Header>\n        <Card.Body>\n          {x.description}\n        </Card.Body>\n      </Card>\n    ))}\n  </>\n}\n","import React from 'react';\nimport { Table } from 'react-bootstrap'\n\ntype Props = {\n  wounds: number,\n  title: string,\n};\n\nexport function WoundTrack(props: Props) {\n  return <Table striped bordered size=\"sm\">\n    <tr>\n      <td>{props.title}</td>\n      <td>{\"🩸 \".repeat(props.wounds)}</td>\n    </tr>\n  </Table>\n}\n","import React from 'react';\nimport { Ability } from '../../types/Ability';\nimport { Card } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  abilities: Ability[],\n};\n\nfunction AbilityList(props: Props) {\n  return props.abilities.length === 0 ? <></> : (\n    <Card border=\"secondary\" bg=\"light\">\n      <Card.Header style={{ background: \"rgba(0, 0, 0, 0.05)\", fontWeight: \"bold\"}}>\n        Abilities\n      </Card.Header>\n      <Card.Body>\n        {_.sortBy(props.abilities, ['name']).map((x: Ability) => (\n          <p>\n            <strong>{x.name}: </strong>\n            {x.description}\n          </p>\n        ))}\n      </Card.Body>\n    </Card>\n  );\n}\n\nexport default AbilityList;\n","import React from 'react';\nimport { Badge } from 'react-bootstrap'\nimport { Row, Col } from 'react-bootstrap'\nimport { Model } from '../../types/KillTeam2021';\nimport { ModelTitle } from '../ModelTitle'\nimport { WeaponList } from './WeaponList'\nimport { StatBadge } from '../StatBadge'\nimport { EquipmentList } from './EquipmentList'\nimport { ActionList } from './ActionList'\nimport { WoundTrack } from './WoundTrack'\nimport AbilityList from './AbilityList';\nimport _ from 'lodash'\n\ntype Props = {\n  model: Model\n};\n\nexport function Datasheet(props: Props) {\n  return (\n    <Row className={props.model.selected > 0 ? \"included\" : \"excluded\"}>\n      <Col>\n        <ModelTitle {...props.model} />\n        {_.range(1,props.model.selected+1).map((i) => (\n          <WoundTrack wounds={props.model.stats.wounds} title={props.model.name || `${props.model.type} ${(props.model.selected > 1 ? i : '')}`} />\n        ))}\n        <WeaponList weapons={props.model.weapons} />\n        <Row>\n          <Col>\n            <EquipmentList equipment={props.model.equipment} />\n            <AbilityList abilities={props.model.abilities} />\n          </Col>\n          <Col>\n            <ActionList actions={props.model.actions} />\n          </Col>\n        </Row>\n      </Col>\n      <Col sm='auto'>\n        <div>\n          <Badge pill variant=\"primary\" className=\"mb-2\" style={{\n            textTransform: \"uppercase\",\n            marginRight: \"10px\",\n            display: \"block\",\n          }}>\n            {props.model.faction} 💀\n          </Badge>\n          {props.model.keywords.map((keyword: string) => (\n            <Badge pill variant=\"secondary\" className=\"mb-2\" style={{\n              textTransform: \"uppercase\",\n              marginRight: \"10px\",\n              display: \"block\",\n            }}>\n              {keyword}\n            </Badge>\n          ))}\n        </div>\n        <Row>\n          <Col sm='auto'>\n            <StatBadge name=\"M\" value={`${props.model.stats.movement}●`}/>\n          </Col>\n          <Col sm='auto'>\n            <StatBadge name=\"W\" value={`${props.model.stats.wounds}`}/>\n          </Col>\n        </Row>\n        <Row>\n          <Col sm='auto'>\n            <StatBadge name=\"APL\" value={`${props.model.stats.actionPointLimit}`}/>\n          </Col>\n          <Col sm='auto'>\n            <StatBadge name=\"GA\" value={`${props.model.stats.groupActivation}`}/>\n          </Col>\n        </Row>\n        <Row>\n          <Col sm='auto'>\n            <StatBadge name=\"DF\" value={`${props.model.stats.defence}`}/>\n          </Col>\n          <Col sm='auto'>\n            <StatBadge name=\"Sv\" value={`${props.model.stats.save}+`}/>\n          </Col>\n        </Row>\n      </Col>\n    </Row>\n  );\n}\n","import React from 'react';\nimport { Ability } from '../../types/Ability';\nimport { Table } from 'react-bootstrap';\nimport _ from 'lodash'\n\ntype Props = {\n  rules: Ability[]\n};\n\nexport function RuleList(props: Props) {\n  return props.rules.length === 0 ? <></> : (\n    <Table striped bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Description</th>\n        </tr>\n      </thead>\n      <tbody>\n        {_.sortBy(props.rules, ['name']).map((x: Ability) => (\n          <tr>\n            <td>{x.name}</td>\n            <td>{x.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n","import React, { MouseEvent } from 'react';\nimport { Col } from 'react-bootstrap';\nimport { CloseButton } from '../CloseButton';\nimport { Model } from '../../types/KillTeam2021';\nimport { Datasheet } from './Datasheet';\nimport { RuleList } from './RuleList';\nimport _ from 'lodash'\n\ntype Props = {\n  name: string,\n  models: Model[],\n  onClose: (event: MouseEvent<HTMLButtonElement>) => void,\n};\n\nexport function Roster(props: Props) {\n  const headingStyle = {\n    background: 'black',\n    color: 'white',\n    padding: '10px',\n    width: '100%',\n    display: 'flex',\n  };\n  return <>\n    <h1 style={headingStyle}>\n      <Col>\n        {props.name}\n      </Col>\n      <Col style={{flexGrow: 0, textAlign: 'right'}}>\n        <CloseButton onClose={props.onClose}/>\n      </Col>\n    </h1>\n    {props.models.map((model: Model) => (\n        <Datasheet model={model}/>\n    ))}\n    <h2 style={headingStyle}>Rules</h2>\n    <RuleList rules={_.uniqBy(_.flatten(props.models.map((m) => (m.rules))), 'name')}/>\n  </>\n}\n","import _ from 'lodash'\nimport { Ability } from '../../types/Ability'\n\nconst phasePatterns = {\n  scouting: [\n    / scouting /\n  ],\n  deployment: [\n    / before the first battle round /,\n    / set up /,\n    / cult ambush /\n  ],\n  initiative: [\n    / start of each battle round /,\n    / beginning of each battle round /,\n    / at the beginning of the battle round /\n  ],\n  movement: [\n    / movement phase /,\n    / climbs? /,\n    / normal move /,\n    / advances? /,\n    / charges? /,\n    / falls? back /,\n    / reacts? /,\n    / overwatch /,\n    / retreats? /,\n    / fly /,\n    / after this model has charged /,\n    / from reserves? /,\n    / can move across /,\n    / setup within /\n  ],\n  psychic: [\n    / psychic /,\n    / deny the witch /,\n    / perils of the warp /,\n    / psychich / // handle typo\n  ],\n  shooting: [\n    / shooting phase /,\n    / shots? /,\n    / ballistic skill /,\n    / ranged /,\n    / range characteristic /,\n    / half range /,\n    / long range /,\n    / short range /,\n    / grenades? /,\n    / shoots? /,\n    / shooting /,\n    / fire[sd]+ /,\n    / firing /,\n    / obscured /,\n    / obcured /, // handle typo\n    / order(ed)? /,\n    / voice of command /,\n    / invulnerable save /,\n    / demolition charges? /,\n    / liberator autostubs /,\n    / obscurred /, // handle typo\n    / look out sir! /,\n    / pistol /,\n    / heavy weapons?/,\n    / add [0-9] to saving throws /\n  ],\n  fight: [\n    / fight phase /,\n    / fights? /,\n    / weapon skill /,\n    / attacks characteristics? /,\n    / strength characteristics? /,\n    / piles? in /,\n    / consolidates? /,\n    / melee /,\n    / close combat /,\n    / death to the false emperor /,\n    / additional attacks? /,\n    / invulnerable save /,\n    / look out sir! /,\n    / intervening terrain /,\n    / terrain that is between the two models /,\n    / damage characteristic is [0-9] in a battle round in which this model charged /,\n    / add [0-9] to saving throws /\n  ],\n  morale: [\n    / nerve /,\n    / leadership /\n  ]\n}\n\nconst genericPatterns = [\n  / weapon /,\n  / hit rolls? /,\n  / attack(s|ing)? /,\n  / saves? /,\n  / saving throws? /,\n  / injury rolls? /,\n  / wound rolls? /,\n  / loses? a wound /,\n  / fall(ing)? damage /,\n  / the bearer is taken out of action /,\n  / toughness characteristic /,\n  / suffers? a mortal wound /,\n  / taken out of action /,\n  / this weapon/,\n  / reduced to 0 wounds /\n]\n\nconst antiPatterns = {\n  deployment: [\n    / from reserve /\n  ],\n  movement: [\n    / previous movement phase /,\n    / preceding movement phase /,\n    / if the firing model moved /,\n    / moved during the movement phase /,\n    / round in which it charges or is charged /,\n    / in which it made a successful charge /,\n    / even if it fell back in the movement phase /,\n    / model that can fly /,\n    / as if it were the movement phase /,\n    / stunned /,\n    / penalty for moving /,\n    / as if the model had remained stationary /,\n    / demolition charge /\n  ],\n  psychic: [\n    / after all of this weapon's attacks have been resolved /\n  ],\n  shooting: [\n    / when (it|this model) fires overwatch /,\n    / invulnerable save (against attacks made )?in the fight phase /,\n    / as if it were your shooting phase /,\n    / tactical support turret /,\n    / out of action in the shooting phase /,\n    / mordian /\n  ],\n  fight: [\n    / the ordered model immediately fights /,\n    / shots equal to its attacks characteristic /,\n    / stunned /,\n    / target enemies at [0-9]{1,2}\" or less /,\n    / within half range /,\n    / tactical support turret /\n  ],\n  morale: [\n    / target model's leadership /,\n    / weapon against a model which has a leadership /,\n    / subtract 1 from its leadership / // phantasm grenade effect\n  ]\n}\n\nexport const calculatePhases = (description: string) => {\n  const minDesc = ' ' + description.toLowerCase().replace(/[.,)(]/g, '') + ' '\n  const phases : string[] = []\n  _.forIn(phasePatterns, (patterns, phase) => {\n    if (_.some(patterns, (re) => (re.test(minDesc)))) {\n      phases.push(phase)\n    }\n  })\n  // If there's no fight or shoot yet, test some generic patterns that could be either\n  if (!phases.includes('fight') && !phases.includes('shooting')) {\n    if (_.some(genericPatterns, (re) => (re.test(minDesc)))) {\n      phases.push('fight', 'shooting')\n    }\n  }\n  // Remove phases for some patterns that get picked up incorrectly\n  _.forIn(antiPatterns, (patterns, phase) => {\n    if (_.some(patterns, (re) => (re.test(minDesc)))) {\n      _.remove(phases, (p) => (p === phase))\n    }\n  })\n  // OK, done\n  return phases\n}\n\nexport const parseAdditionalAttacks = (description: string) => {\n  const patterns = [\n    /Add ([1-9]{1}) to this model's Attacks characteristic/,\n    / ([1-9]|an|one|two) additional attack/,\n    /(one) \\(and only one\\) attack with this weapon./\n  ]\n  const antiPatterns = [\n    /if a model/,\n    /if the bearer/,\n    /unless/\n  ]\n  return _.sum(_.map(patterns, (pattern) => {\n    const match = description.match(pattern)\n    if (match) {\n      if (_.some(antiPatterns, (re) => (re.test(description)))) {\n        return 0\n      }\n      if (match[1] === 'an' || match[1] === 'one') return 1\n      if (match[1] === 'two') return 2\n      return parseInt(match[1] || match[2])\n    }\n    return 0\n  }))\n}\n\nexport const invulnerableSave = (abilities: Ability[]) => {\n  const patterns = [\n    /models with this ability have a ([1-6]{1})\\+ invulnerable save/,\n    /has a ([1-6]{1})\\+ invulnerable save($|\\.|,| and| instead of)/,\n    /has an invulnerable save of ([1-6]{1})\\+/\n  ]\n  const saves = _.map(abilities, (a) => {\n    return _.min(_.map(patterns, (pattern) => {\n      const match = a.description.match(pattern)\n      if (match) {\n        return parseInt(match[1])\n      }\n      return null\n    }))\n  })\n  return _.min(saves)\n}\n","import { v4 as uuidv4 } from 'uuid'\nimport _ from 'lodash'\nimport hash from 'node-object-hash'\nimport * as XPath from 'xpath-ts'\nimport { parseAdditionalAttacks, calculatePhases, invulnerableSave } from './Abilities'\n\n// useNamespaces is NOT a React hook, so:\n// eslint-disable-next-line\nconst xpath = XPath.useNamespaces({ roster: 'http://www.battlescribe.net/schema/rosterSchema' })\n\nconst stat = (name, model) => {\n  const nodes = xpath(`roster:profiles/roster:profile[@typeName='Model']//roster:characteristic[@name='${name}']`, model)\n  if (nodes.length > 0) {\n    return parseInt(nodes[0].childNodes[0].nodeValue)\n  } else { return '' }\n}\n\nconst weaponStat = (name, weapon, numeric) => {\n  const nodes = xpath(`roster:characteristics/roster:characteristic[@name='${name}']`, weapon)\n  if (nodes.length > 0) {\n    return numeric ? parseInt(nodes[0].childNodes[0].nodeValue) : nodes[0].childNodes[0].nodeValue\n  } else { return '' }\n}\n\nconst points = (model) => {\n  const costNode = xpath('.//roster:costs/roster:cost[@name=\\'pts\\']', model)\n  return _.sumBy(costNode, (x) => parseInt(x.getAttribute('value')))\n}\n\nconst parseForceRule = (rule) => {\n  const description = xpath('roster:description', rule)[0].childNodes[0].nodeValue\n  return {\n    name: rule.getAttribute('name'),\n    description,\n    phases: calculatePhases(description)\n  }\n}\n\nconst parseAbility = (ability) => {\n  const description = xpath(\".//roster:characteristic[@name='Description']\", ability)[0].childNodes[0].nodeValue\n  return {\n    name: ability.getAttribute('name'),\n    description,\n    phases: calculatePhases(description)\n  }\n}\n\nconst parseWeapon = (weapon, userStrength) => {\n  let strength = weaponStat('S', weapon, false)\n  if (strength === 'User') {\n    strength = userStrength\n  }\n  let match = /x([0-9]+)/i.exec(strength)\n  if (match) {\n    strength = userStrength * parseInt(match[1])\n  }\n  match = /\\+([0-9]+)/i.exec(strength)\n  if (match) {\n    strength = userStrength + parseInt(match[1])\n  }\n  let weaponType = weaponStat('Type', weapon, false)\n  if (weaponType !== 'Melee') { weaponType = weaponType.split(' ').slice(0, -1).join(' ') }\n  return {\n    name: weapon.getAttribute('name'),\n    range: weaponStat('Range', weapon, true),\n    type: weaponType,\n    shots: weaponStat('Type', weapon, false).split(' ').slice(-1)[0],\n    strength,\n    armourPiercing: weaponStat('AP', weapon, true),\n    damage: weaponStat('D', weapon, false),\n    abilities: weaponStat('Abilities', weapon, false)\n  }\n}\n\nconst parseWargear = (wargear) => {\n  const description = xpath(\".//roster:characteristic[@name='Ability']\", wargear)[0].childNodes[0].nodeValue\n  return {\n    name: wargear.getAttribute('name'),\n    description,\n    phases: calculatePhases(description)\n  }\n}\n\nconst parsePsychicPower = (power) => {\n  let description = xpath(\".//roster:characteristic[@name='Psychic Power']\", power)[0].childNodes[0].nodeValue\n  const warpChargeDescription = description.match(/warp charge value of ([0-9]+)\\.(.*)/)\n  let charge = null\n  if (warpChargeDescription.length > 2) {\n    charge = parseInt(warpChargeDescription[1])\n    description = warpChargeDescription[2]\n  }\n  return {\n    name: power.getAttribute('name'),\n    charge,\n    description\n  }\n}\n\nexport const additionalAttacks = (weapons, abilities) => {\n  const descriptions = _.map(weapons, (w) => w.abilities).concat(_.map(abilities, (a) => a.description))\n  const attacks = _.map(descriptions, (d) => parseAdditionalAttacks(d))\n  return _.sum(attacks)\n}\n\nconst parseModel = (model) => {\n  const wargear = xpath(\".//roster:profile[@typeName='Wargear']\", model).map(parseWargear)\n  const specialismSelection = xpath(\"roster:selections/roster:selection[roster:selections/roster:selection/roster:profiles/roster:profile/@typeName='Ability']\", model)\n  const abilities = xpath(\".//roster:profile[@typeName='Ability']\", model).map(parseAbility).concat(wargear)\n  const stats = {\n    movement: stat('M', model),\n    weapon_skill: stat('WS', model),\n    ballistic_skill: stat('BS', model),\n    strength: stat('S', model),\n    toughness: stat('T', model),\n    wounds: stat('W', model),\n    attacks: stat('A', model),\n    leadership: stat('Ld', model),\n    save: stat('Sv', model),\n    invulnerable_save: invulnerableSave(abilities)\n  }\n  const closeCombatWeapon = {\n    name: 'Bare fists',\n    range: '-',\n    type: 'Melee',\n    strength: stats.strength,\n    armourPiercing: 0,\n    damage: 1,\n    abilities: 'Default close combat weapon available to all models'\n  }\n  const weapons = xpath(\".//roster:profile[@typeName='Weapon']\", model).map((x) => (parseWeapon(x, stats.strength))).concat([closeCombatWeapon])\n  stats.additional_attacks = additionalAttacks(weapons, abilities)\n  const psychicPowers = xpath(\"roster:selections/roster:selection/roster:profiles/roster:profile[@typeName='Psychic Power']\", model).map(parsePsychicPower)\n  const category = xpath(\"roster:categories/roster:category[@primary='true']\", model)[0].getAttribute('name')\n  const faction = xpath(\"roster:categories/roster:category[@primary='false' and starts-with(@name,'Faction: ')]\", model)\n  const keywords = xpath(\"roster:categories/roster:category[@primary='false' and not(starts-with(@name,'Faction: '))]\", model).map((x) => x.getAttribute('name'))\n  _.remove(keywords, (x) => (x === 'Model'))\n  const details = {\n    name: model.getAttribute('customName'),\n    type: model.getAttribute('name'),\n    category: category === 'Non-specialist' ? null : category,\n    stats,\n    abilities,\n    weapons,\n    wargear,\n    psychicPowers,\n    specialism: specialismSelection.length > 0 ? specialismSelection[0].getAttribute('name') : null,\n    faction: faction.length > 0 ? faction[0].getAttribute('name').split(': ', 2)[1] : null,\n    keywords,\n    points: points(model)\n  }\n  return { ...details, hash: hash([]).hash(details) }\n}\n\nexport const parseBattlescribeXML = (doc) => {\n  const models = []\n  const name = xpath('/roster:roster', doc)[0].getAttribute('name')\n  const forceRules = xpath('//roster:force/roster:rules/roster:rule', doc).map(parseForceRule)\n  for (const category of xpath('//roster:force/roster:categories/roster:category', doc)) {\n    const categoryId = category.getAttribute('entryId')\n    for (const model of xpath(`//roster:selection[@type='model' and roster:categories/roster:category/@entryId='${categoryId}']`, doc)) {\n      models.push(parseModel(model))\n    }\n  }\n  const uniqueModels = _.groupBy(models, (m) => m.hash)\n  return {\n    system: 'KillTeam2018',\n    name,\n    forceRules,\n    models: _.map(uniqueModels, (model) => ({\n      ...model[0],\n      uuid: uuidv4(),\n      count: model.length,\n      selected: model.length\n    }))\n  }\n}\n","import { v4 as uuidv4 } from 'uuid'\nimport _ from 'lodash'\nimport hash from 'node-object-hash'\nimport * as XPath from 'xpath-ts'\nimport { Roster, Model, Weapon, Equipment, Action } from '../../types/KillTeam2021';\nimport { Ability } from '../../types/Ability';\n\n// useNamespaces is NOT a React hook, so:\n// eslint-disable-next-line\nconst xpSelect = XPath.useNamespaces({ bs: 'http://www.battlescribe.net/schema/rosterSchema' })\n\nconst stat = (name: string, model: Element) : number => {\n  const node = xpSelect(`bs:profiles/bs:profile[@typeName='Operative']//bs:characteristic[@name='${name}']/text()`, model, true)\n  if (node) {\n    return parseInt(node.toString())\n  } else { return 0 }\n}\n\nconst parseWeapon = (weapon : Node) : Weapon => {\n  return {\n    name: xpSelect('string(@name)', weapon, true).toString(),\n    melee: xpSelect('string(@name)', weapon, true).toString().startsWith(\"⚔\"),\n    attacks: parseInt(xpSelect(\".//bs:characteristic[@name='A']/text()\", weapon, true).toString()),\n    hit: parseInt(xpSelect(\".//bs:characteristic[@name='WS/BS']/text()\", weapon, true).toString()),\n    damage: parseInt(xpSelect(\".//bs:characteristic[@name='D']/text()\", weapon, true).toString().split('/')[0]),\n    specialRules: (xpSelect(\".//bs:characteristic[@name='SR']/text()\", weapon, true) || \"-\").toString(),\n    criticalDamage: parseInt(xpSelect(\".//bs:characteristic[@name='D']/text()\", weapon, true).toString().split('/')[1]),\n    criticalRules: (xpSelect(\".//bs:characteristic[@name='!']/text()\", weapon, true) || \"-\").toString(),\n  }\n}\n\nconst parseAbility = (ability : Node) : Ability => {\n  return {\n    name: xpSelect('string(@name)', ability, true).toString(),\n    description: (xpSelect(\".//bs:characteristic[@name='Ability']/text()\", ability, true) || \"-\").toString(),\n    phases: []\n  }\n}\n\nconst parseAction = (action : Node) : Action => {\n  return {\n    name: xpSelect('string(@name)', action, true).toString(),\n    description: (xpSelect(\".//bs:characteristic[@name='Unique Action']/text()\", action, true) || \"-\").toString(),\n    cost: 1,\n  }\n}\n\nconst parseEquipment = (equipment : Node) : Equipment => {\n  return {\n    name: xpSelect('string(@name)', equipment, true).toString(),\n    cost: parseInt(xpSelect(\"string(.//bs:cost/@value)\", equipment, true).toString()),\n    description: (xpSelect(\".//bs:characteristic[@name='Equipment']/text()\", equipment, true) || \"-\").toString(),\n  }\n}\n\nconst parseRule = (rule : Node) : Ability => {\n  return {\n    name: xpSelect('string(@name)', rule, true).toString(),\n    description: (xpSelect(\".//bs:description/text()\", rule, true) || \"-\").toString(),\n    phases: []\n  }\n}\n\nconst factionKeywords = [\n  \"Brood Coven\",\n  \"Cadre Mercenary\",\n  \"Chaos Daemons\",\n  \"Commorrite\",\n  \"Craftworld\",\n  \"Death Guard\",\n  \"Ecclesiarchy\",\n  \"Forge World\",\n  \"Greenskin\",\n  \"Grey Knight\",\n  \"Hive Fleet\",\n  \"Hunter Cadre\",\n  \"Hunter Clade\",\n  \"Imperial Guard\",\n  \"Kommando\",\n  \"Space Marine\",\n  \"Talons of the Emperor\",\n  \"Thousand Sons\",\n  \"Tomb World\",\n  \"Traitor Space Marine\",\n  \"Troupe\",\n  \"Veteran Guardsmen\",\n];\n\nconst parseModel = (model : Element) : Model => {\n  const allKeywords = (xpSelect(\"bs:categories/bs:category[@primary='false']/@name\", model) as Node[]).map((x) => (x.textContent || '').replace(\"💀\",\"\"));\n  const faction = _.intersection(allKeywords, factionKeywords).pop() || null;\n  const keywords = _.remove(allKeywords, (x) => (x !== faction));\n  const details = {\n    name: xpSelect('string(@customName)', model, true).toString(),\n    type: xpSelect('string(@name)', model, true).toString(),\n    stats: {\n      movement: stat(\"M\", model),\n      actionPointLimit: stat(\"APL\", model),\n      groupActivation: stat(\"GA\", model),\n      defence: stat(\"DF\", model),\n      save: stat(\"SV\", model),\n      invulnerable_save: null,\n      wounds: stat(\"W\", model),\n    },\n    weapons: (xpSelect(\".//bs:profile[@typeName='Weapons']\", model) as Node[]).map(parseWeapon),\n    equipment: (xpSelect(\".//bs:selection[(@type='upgrade') and (//bs:cost/@value!='0.0')]\", model) as Node[]).map(parseEquipment),\n    abilities: (xpSelect(\".//bs:profile[@typeName='Abilities']\", model) as Node[]).map(parseAbility),\n    actions: (xpSelect(\".//bs:profile[@typeName='Unique Actions']\", model) as Node[]).map(parseAction),\n    rules: (xpSelect(\".//bs:rules/bs:rule\", model) as Node[]).map(parseRule),\n    keywords,\n    faction,\n    uuid: \"\",\n    count: 0,\n    selected: 0,\n  };\n  return { ...details, hash: hash().hash({type: details.type, weapons: details.weapons, equipment: details.equipment}) }\n}\n\nexport const parseBattlescribeXML = (doc : Document) : Roster => {\n  const models = []\n  const name = xpSelect('string(/bs:roster/@name)', doc, true).toString()\n  for (const model of xpSelect('//bs:selection[@type=\\'model\\']', doc) as Element[]) {\n    models.push(parseModel(model))\n  }\n  const uniqueModels = _.groupBy(models, (m) => m.hash)\n  return {\n    system: \"KillTeam2021\",\n    name,\n    models: _.map(uniqueModels, (model) => ({\n      ...model[0],\n      uuid: uuidv4(),\n      count: model.length,\n      selected: model.length\n    }))\n  }\n}\n","import { parseBattlescribeXML as parseKillTeam2018 } from './parsers/KillTeam2018/BattlescribeParser'\nimport { parseBattlescribeXML as parseKillTeam2021 } from './parsers/KillTeam2021/BattlescribeParser'\nimport JSZip from 'jszip'\nimport { DOMParserImpl } from 'xmldom-ts'\nimport * as XPath from 'xpath-ts'\nimport { Roster as Roster2018 } from './types/KillTeam2018';\nimport { Roster as Roster2021 } from './types/KillTeam2021';\n\n// useNamespaces is NOT a React hook, so:\n// eslint-disable-next-line\nconst xpSelect = XPath.useNamespaces({ bs: 'http://www.battlescribe.net/schema/rosterSchema' })\n\nconst unzip = async (file: string) : Promise<string> => {\n  if (file.charAt(0) !== 'P') {\n    return file\n  } else {\n    const jszip = new JSZip()\n    const zip = await jszip.loadAsync(file)\n    return zip.file(/[^/]+\\.ros/)[0].async('string') // Get roster files that are in the root\n  }\n}\n\nconst parseFile = (file: string) : Roster2018 | Roster2021 => {\n  const doc = new DOMParserImpl().parseFromString(file)\n  const gameSystemId = (xpSelect('/bs:roster/@gameSystemId', doc, true) as Node).nodeValue\n  switch (gameSystemId) {\n    case 'a467-5f42-d24c-6e5b':\n      return parseKillTeam2018(doc) as Roster2018\n    case '3b7e-7dab-f79f-2e74':\n      return parseKillTeam2021(doc)\n    default:\n      throw new Error('Unsupported game system!')\n  }\n}\n\nexport const loadFile = async (file: File) : Promise<Roster2018 | Roster2021> => {\n  const reader = new FileReader()\n  return new Promise((resolve, reject) => {\n    reader.onerror = () => {\n      reader.abort()\n      reject(new DOMException('Problem parsing input file.'))\n    }\n    reader.onloadend = async () => {\n      const content = reader.result as string\n      const file = await unzip(content)\n      resolve(parseFile(file))\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport const loadFiles = (files: File[]) : Promise<Roster2018 | Roster2021> => {\n  return loadFile(files[0])\n}\n","import React, { useState } from 'react'\nimport Homepage from './components/Homepage'\nimport { Roster as RosterView2018 } from './components/KillTeam2018/Roster'\nimport { Roster as RosterView2021 } from './components/KillTeam2021/Roster'\nimport { Container } from 'react-bootstrap'\nimport { loadFiles } from './FileLoader'\nimport { Roster as Roster2018 } from './types/KillTeam2018'\nimport { Roster as Roster2021 } from './types/KillTeam2021'\n\nexport function App() {\n\n  const [roster, setRoster] = useState<Roster2018|Roster2021|null>(null)\n\n  const handleUpload = async (acceptedFiles: File[]) => {\n    const r = await loadFiles(acceptedFiles);\n    setRoster(r)\n  }\n\n  const handleClose = () => {\n    setRoster(null)\n  }\n\n  const handleSelectionChanged = (uuid: string, selectedCount: number) => {\n    if (roster && isRosterKT18(roster)) {\n      setRoster(Object.assign({models: roster.models.map((model) => (\n        model.uuid !== uuid\n          ? model\n          : Object.assign(\n              model,\n              { selected: selectedCount }\n            )\n      ))}, roster))\n    }\n  }\n\n  const isRosterKT18 = (roster: any): roster is Roster2018 => (roster.system === \"KillTeam2018\")\n  const isRosterKT21 = (roster: any): roster is Roster2021 => (roster.system === \"KillTeam2021\")\n\n  return (\n    <Container fluid='lg'>\n      {roster === null ? <Homepage onUpload={handleUpload} /> : <></>}\n      {roster && isRosterKT18(roster) ? <RosterView2018 name={roster.name} models={roster.models} onClose={handleClose} forceRules={roster.forceRules} onSelectionChanged={handleSelectionChanged} /> : <></>}\n      {roster && isRosterKT21(roster) ? <RosterView2021 name={roster.name} models={roster.models} onClose={handleClose} /> : <></>}\n    </Container>\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport { App } from './App'\nimport * as serviceWorker from './serviceWorker'\nimport * as Sentry from \"@sentry/react\";\n// import { Integrations } from \"@sentry/tracing\";\n\nSentry.init({\n  dsn: \"https://6fe3e632b45a44c086068e13f3b1a783@o464596.ingest.sentry.io/5473956\",\n  // integrations: [\n  //   new Integrations.BrowserTracing(),\n  // ],\n  // tracesSampleRate: 0.0,\n});\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// Enable offline use with a service worker\n// See https://create-react-app.dev/docs/making-a-progressive-web-app/\nserviceWorker.register()\n"],"sourceRoot":""}